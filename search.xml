<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>CSP-J 2021èµ›åæ€»ç»“</title>
    <url>/2021/11/13/CSP-J-2021%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="solution">Solution</h1>
<h2 id="t1">T1</h2>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> l, r, n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">brute</span><span class="params">(<span class="keyword">int</span> n ,<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>{</span><br><span class="line">    <span class="comment">//bf: æš´åŠ›æšä¸¾k \in [l, r], 90 pts</span></span><br><span class="line">    <span class="keyword">int</span> ans = -INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = l; i &lt;= r; i ++) {</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, i % n);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">ac</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>{</span><br><span class="line">    <span class="comment">//å…ˆè¦æ˜ç™½ä½™æ•°æ˜¯å¾ªç¯å‡ºç°çš„</span></span><br><span class="line">    <span class="comment">//L mod n = l, R mod n = r</span></span><br><span class="line">    <span class="comment">//åˆ™ä½™æ•°æ˜¯{l, l + 1, l + 2, ..., l + n - 1, ..., 0, 1, 2, ..., n - 1, ..., r}</span></span><br><span class="line">    <span class="keyword">int</span> ans;</span><br><span class="line">    <span class="keyword">if</span>(l / n == r / n) ans = r % n;     <span class="comment">//[l, r]åŒºé—´æ¯”nå° --&gt; æ•°è¶Šå¤§ ä½™æ•°è¶Šå¤§ å› ä¸ºæ²¡æœ‰åˆ°n - 1çš„</span></span><br><span class="line">    <span class="keyword">else</span> ans = n - <span class="number">1</span>;                   <span class="comment">//l / n == r / n --&gt; [l, r]åŒºé—´æ¯”nå¤§ --&gt; è‚¯å®šæœ‰èƒ½å–åˆ°n - 1çš„æ•°, å³æœ€å¤§k.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>); cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="comment">//cout &lt;&lt; brute(n, l, r) &lt;&lt; endl;</span></span><br><span class="line">    cout &lt;&lt; <span class="built_in">ac</span>(n, l, r) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="t2">T2</h2>
<h2 id="t3">T3</h2>
<h2 id="t4">T4</h2>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>èµ›åæ€»ç»“</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>FREE-Figurines</title>
    <url>/2021/12/04/FREE-Figurines/</url>
    <content><![CDATA[<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä¸¤ç§æ“ä½œ: æ¥åœ¨åé¢ / åˆ é™¤æœ€å‰é¢.</span></span><br><span class="line"><span class="comment">æœ€å·®æƒ…å†µ: "é‡ç»„", å³å…¨éƒ¨åˆ äº†å†æ‹¼èµ·æ¥. éœ€è¦2næ¬¡æ“ä½œ.</span></span><br><span class="line"><span class="comment">ä¼˜åŒ–: å°¾å·´ä¸Šçš„èŠ‚ç‚¹ä¸éœ€è¦æ“ä½œ. å¯ä»¥ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªè¿™ç§èŠ‚ç‚¹, å‡å»èŠ‚ç‚¹æ•° * 2å³å¯.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> src[N], dest[N], len[N], n, ans;</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">debug</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"ans = %d\n"</span>, ans);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">/*é¢„å¤„ç†, ç»Ÿè®¡æœ€åæƒ…å†µans*/</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {</span><br><span class="line">        cin &gt;&gt; src[i];</span><br><span class="line">        vis[src[i]] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(src[i]) ans++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {</span><br><span class="line">        cin &gt;&gt; dest[i];</span><br><span class="line">        vis[dest[i]] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(dest[i]) ans++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) {</span><br><span class="line">        <span class="keyword">if</span>(!vis[i]) {</span><br><span class="line">            <span class="keyword">int</span> tmpi = i;</span><br><span class="line">            <span class="keyword">while</span>(src[tmpi] * dest[tmpi] &amp;&amp; src[tmpi] == dest[tmpi]) {   <span class="comment">//ä¸ä¸ºè‡ªç”±çš„ &amp;&amp; ç›¸ç­‰å°±æ˜¯ä¸ç”¨æ–­å¼€çš„é“¾</span></span><br><span class="line">                ans -= <span class="number">2</span>;</span><br><span class="line">                tmpi = src[tmpi];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>OIæ¯”èµ›ä¸­çš„é‚£äº›ç„å­¦ä¼˜åŒ–</title>
    <url>/2021/10/22/OI%E6%AF%94%E8%B5%9B%E4%B8%AD%E7%9A%84%E9%82%A3%E4%BA%9B%E7%8E%84%E5%AD%A6%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>è¿™æ˜¯æˆ‘æš‘å‡é›¶åŸºç¡€å…¥é—¨C++çš„æ—¶å€™æ•´ç†çš„å°æŠ€å·§. ç°åœ¨åˆ°äº†CSP-2021èµ›å‰, æˆ‘åœ¨çœ‹ç¬”è®°çš„æ—¶å€™å‘ç°äº†è¿™ä¸ª, å°±æŠŠå®ƒå‘åœ¨æˆ‘çš„ç½‘ç«™ä¸Š, å¸Œæœ›èƒ½å¸®åˆ°å³å°†å‚åŠ OIçš„ä½ , <del>ä¹Ÿå¸Œæœ›èƒ½å€Ÿæ­¤ç»™è‡ªå·±å¢åŠ Rp</del>.</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡OIæ¯”èµ›, å¸Œæœ›èƒ½è€ƒå¥½ç‚¹.</p>
<h1 id="è¯»å…¥ä¼˜åŒ–">è¯»å…¥ä¼˜åŒ–</h1>
<p><strong>freadå¿«è¯»/å¿«å†™ä»£ç æ¥è‡ªoi-wiki</strong></p>
<h2 id="å…³é—­åŒæ­¥æ¨è">å…³é—­åŒæ­¥(æ¨è)</h2>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br></pre></td></tr></tbody></table></figure>
<p>å…³é—­iostreamä¸stdioä¸­è¾“å…¥è¾“å‡ºæµçš„åŒæ­¥. ä½¿<code>std::cin</code>ä¸<code>std::cout</code>æ¥è¿‘äº<code>scanf()</code>ä¸<code>printf()</code>çš„é€Ÿåº¦.</p>
<h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3>
<p>è¿™ä¸ªå°ä¼˜åŒ–æ˜¯ç”¨å¾—æœ€å¤šçš„, cinå’Œcoutæ…¢çš„è¦å‘½, åœ¨IOç‰¹åˆ«å¤šçš„é¢˜ä¸­è¦ç”¨cin/coutä¸€å®šè¦åŠ .</p>
<p><strong>æ³¨æ„: åŠ äº†ç¬¬ä¸€è¡Œä¹‹åå°†æ— æ³•ä½¿ç”¨<code>printf()</code>, <code>scanf()</code>ç­‰<code>stdio.h</code>ä¸­çš„å‡½æ•°, å¦‚æœä½œæ­»ç”¨äº†ä¼šå¯¼è‡´IOæµæ··ä¹±! </strong></p>
<p><strong>æ³¨æ„2: cin/coutå†™å…¥æ–‡ä»¶ä¸æ˜¯å³æ—¶çš„, æ‰€ä»¥ä¸€å®šè¦<code>endl</code>åˆ·æ–°ç¼“å†²åŒº(æˆ–è€…<code>\n</code>ä¹‹ç±»çš„)</strong></p>
<h2 id="printfå’Œscanfæ¨è"><code>printf()</code>å’Œ<code>scanf()</code>(æ¨è)</h2>
<p>åŒä¸Š, é€Ÿåº¦å—–å—–çš„. ä½†æ˜¯ä¸èƒ½åœ¨å…³é—­åŒæ­¥åä½¿ç”¨.</p>
<p>è¿˜èƒ½æ ¼å¼åŒ–å­—ç¬¦ä¸², ä¸é¦™å—?(æ¯”å¦‚è®©ä½ ä¿ç•™8ä½å°æ•°, åªéœ€<code>printf("%.8lf", my_variable)</code>å³å¯, coutè¿˜éœ€å€ŸåŠ©<code>iomanip</code>)</p>
<h2 id="å¿«è¯»å¿«å†™">å¿«è¯»/å¿«å†™</h2>
<p>å¾ˆå¥½ç”¨, <code>getchar()</code>å’Œ<code>putchar()</code>å¿«å¦‚é—ªç”µ.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">int</span> x = <span class="number">0</span>, w = <span class="number">1</span>;	<span class="comment">//xæ˜¯æ•°å­—, wæ˜¯ç¬¦å·ä½</span></span><br><span class="line">  <span class="keyword">char</span> ch = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>) {  <span class="comment">//!isdigit(ch)</span></span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">'-'</span>) w = <span class="number">-1</span>;        </span><br><span class="line">    ch = <span class="built_in">getchar</span>();               </span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">while</span> (ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>) {  <span class="comment">//isdigit(ch)</span></span><br><span class="line">    x = x * <span class="number">10</span> + (ch - <span class="string">'0'</span>); </span><br><span class="line">    ch = <span class="built_in">getchar</span>();</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> x * w;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Example:</span></span><br><span class="line"><span class="comment">//int n = read();</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> sta[<span class="number">35</span>];</span><br><span class="line">  <span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">do</span> {</span><br><span class="line">    sta[top++] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">  } <span class="keyword">while</span> (x);</span><br><span class="line">  <span class="keyword">while</span> (top) <span class="built_in">putchar</span>(sta[--top] + <span class="number">48</span>); <span class="comment">//(int)'0'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Example:</span></span><br><span class="line"><span class="comment">//int a = 5;</span></span><br><span class="line"><span class="comment">//write(a);	</span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="freadè¾ƒä¸ºç„å­¦">fread(è¾ƒä¸ºç„å­¦)</h2>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> IO {</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXSIZE = <span class="number">1</span> &lt;&lt; <span class="number">20</span>;</span><br><span class="line"><span class="keyword">char</span> buf[MAXSIZE], *p1, *p2;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> gc()                                                               \</span></span><br><span class="line"><span class="meta">  (p1 == p2 &amp;&amp; (p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin), p1 == p2) \</span></span><br><span class="line"><span class="meta">       ? EOF                                                               \</span></span><br><span class="line"><span class="meta">       : *p1++)</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rd</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">char</span> c = <span class="built_in">gc</span>();</span><br><span class="line">  <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="string">'-'</span>) f = <span class="number">-1</span>;</span><br><span class="line">    c = <span class="built_in">gc</span>();</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) x = x * <span class="number">10</span> + (c ^ <span class="number">48</span>), c = <span class="built_in">gc</span>();</span><br><span class="line">  <span class="keyword">return</span> x * f;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">char</span> pbuf[<span class="number">1</span> &lt;&lt; <span class="number">20</span>], *pp = pbuf;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> &amp;c)</span> </span>{</span><br><span class="line">  <span class="keyword">if</span> (pp - pbuf == <span class="number">1</span> &lt;&lt; <span class="number">20</span>) <span class="built_in">fwrite</span>(pbuf, <span class="number">1</span>, <span class="number">1</span> &lt;&lt; <span class="number">20</span>, stdout), pp = pbuf;</span><br><span class="line">  *pp++ = c;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> sta[<span class="number">35</span>];</span><br><span class="line">  <span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">do</span> {</span><br><span class="line">    sta[top++] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">  } <span class="keyword">while</span> (x);</span><br><span class="line">  <span class="keyword">while</span> (top) <span class="built_in">push</span>(sta[--top] + <span class="string">'0'</span>);</span><br><span class="line">}</span><br><span class="line">}  <span class="comment">// namespace IO</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚ä¸Šæ˜¯åŸºäº<code>fread</code>å®ç°çš„å¿«è¯»å¿«å†™, æœ¬è´¨æ˜¯åˆ©ç”¨æ–‡ä»¶çš„ç¼“å†²åŒº.</p>
<p>å®ç°æ—¶éœ€è¦å°†<code>getchar()</code>ç¨å¾®æ”¹æ”¹, (ä»£ç ä¸­<code>\</code>è¡¨ç¤ºæ˜¾ç¤ºä¸ä¸‹, å†™çš„æ—¶å€™ä»è¿™ä¸€è¡Œæ¥ç€å†™å°±è¡Œ, æ— éœ€æ¢è¡Œ)</p>
<h3 id="æ³¨æ„äº‹é¡¹-1">æ³¨æ„äº‹é¡¹</h3>
<p>æ•²è¿™ä¸ªæ¿å­å¤ªè´¹æ—¶é—´äº†, è¿˜æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªåŸºäº<code>putchar()</code>å’Œ<code>getchar()</code>çš„é‚£ä¸ªæ€§ä»·æ¯”æœ€é«˜.</p>
<p><strong>å¥½åƒè¿™ä¸ªä¸œè¥¿å¾ˆç„å­¦, ä¸€äº›æƒ…å†µä¸‹ä¼šä½¿æ•´ä¸ªç¨‹åºå˜æ…¢(?)</strong></p>
<h1 id="æ‰§è¡Œä¼˜åŒ–">æ‰§è¡Œä¼˜åŒ–</h1>
<h2 id="iè¾ƒä¸ºæ¨è"><code>++i</code>(è¾ƒä¸ºæ¨è)</h2>
<p>æœ‰ç ”ç©¶è¡¨æ˜<code>++i</code>æ¯”<code>i++</code>å¿«, è¯´æ˜¯<code>i++</code>ç”¨äº†ä¸€ä¸ªä¸´æ—¶å˜é‡.</p>
<p><strong>æ³¨: å¾ˆå¤šäººåœ¨ç½‘ä¸Šç§‘æ™®ä¸¤è€…çš„å…³ç³», ä½†æ˜¯åªæ˜¯çœ‹åç¼–è¯‘ä»£ç , çœ‹åˆ°<code>++i</code>æ¯”<code>i++</code>ç”¨çš„æ±‡ç¼–æŒ‡ä»¤å°‘ä¸€ä¸¤ä¸ª, å°±è¯´<code>++i</code>æ›´å¿«(ç”šè‡³æ¯ä¸€å¥æŒ‡ä»¤çš„æ„æ€éƒ½è¯´ä¸€ä¸‹, å³åˆ°åº•æ…¢åœ¨å“ªäº†)??? å°±ç®—çœŸçš„æ˜¯è¿™æ ·è¿™ç§ä¸æ‡‚è£…æ‡‚çš„æ€åº¦ä¹Ÿä¸æ˜¯å¾ˆå¥½</strong></p>
<p><code>++i</code>æ‰§è¡Œå®Œåçš„å€¼è·Ÿiæ˜¯ä¸€æ ·çš„, å¯ä»¥æ‹¿æ¥ç»™å…¶å®ƒå˜é‡èµ‹å€¼.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> k = ++i;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="registerå·²ç»æ­»äº†"><code>register</code>(å·²ç»æ­»äº†)</h2>
<p><code>register</code>, å³ç›´æ¥æ“ä½œå¯„å­˜å™¨. åœ¨C++14é€æ¸è¢«å¼ƒç”¨.</p>
<p>åœ¨ä¹‹å‰çš„C++ç‰ˆæœ¬ä¸­éƒ½å¯ä»¥æ”¾åœ¨å¾ªç¯é‡Œé¢æå‡æ€§èƒ½.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="inlineå†…è”å‡½æ•°æ¨è"><code>inline</code>å†…è”å‡½æ•°(æ¨è)</h2>
<p><code>inline</code>å¯ä»¥åœ¨è°ƒç”¨å¤„å°±åœ°å±•å¼€å‡½æ•°.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">int</span> x = <span class="number">114514</span>;</span><br><span class="line">	<span class="keyword">int</span> y = <span class="built_in">lowbit</span>(x);</span><br><span class="line">	<span class="comment">//ç›¸å½“äºç›´æ¥è¿è¡Œå‡½æ•°, æ²¡æœ‰è°ƒç”¨å…³ç³»</span></span><br><span class="line">	<span class="comment">//inline int lowbit(int x) {</span></span><br><span class="line">	<span class="comment">//		return x &amp; (-x);</span></span><br><span class="line">	<span class="comment">//}</span></span><br><span class="line">    cout &lt;&lt; y &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>å¯¹äºä¸€äº›éœ€è¦è°ƒç”¨å¤šæ¬¡çš„å‡½æ•°, å¯ä»¥ä½¿ç”¨<code>inline</code>å£°æ˜ä»–æ˜¯å†…è”çš„.</p>
<p>å¯¹äºinlineå‡½æ•°, è°ƒç”¨æ—¶ä¸åƒæ™®é€šå‡½æ•°é‚£æ ·, å°†åœ°å€, å‚æ•°ç­‰å…³é”®ä¿¡æ¯å‹å…¥æ ˆ(ä¸€ç§å†…å­˜å¸ƒå±€)ä¸­, å†æ‰§è¡Œ<code>call</code>æŒ‡ä»¤. è¿”å›æ—¶å†æ“ä½œæ ˆ, æœ€å<code>ret</code>. è¿™æ ·ä¸ä»…è´¹æ—¶é—´, è¿˜æµªè´¹æ ˆç©ºé—´.</p>
<p>inlineå‡½æ•°ä¼šåœ¨é¢„å¤„ç†é˜¶æ®µåƒå®(å¦‚<code>#define</code>)åœ¨è°ƒç”¨å¤„åŸåœ°å±•å¼€.</p>
<h3 id="æ³¨æ„äº‹é¡¹-2">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>å¯¹é€’å½’å‡½æ•°æ²¡ç”¨(æœ‰äººè¯´é€’å½’ç¨‹åºç”¨inlineä¼šçˆ†re, æœ¬äººäº²æµ‹ä¸ä¼š, åº”è¯¥æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æ‰äº†)</li>
<li>èŠ‚çœäº†æ ˆç©ºé—´å’Œè°ƒç”¨å¼€é”€, ä½†æ˜¯å¢åŠ äº†ç¨‹åºç¼–è¯‘åçš„ä½“ç§¯. åœ¨æ¯”èµ›ä¸­æ²¡å•¥äº‹, ä½†åœ¨å®é™…å¼€å‘ä¸­æ…ç”¨.</li>
</ul>
<h3 id="å°å®éªŒ-æ¢ç©¶inlineå‡½æ•°çš„æ€§è´¨è¯šæ„æ»¡æ»¡-çœŸçš„ä¸çœ‹çœ‹å—">å°å®éªŒ: æ¢ç©¶inlineå‡½æ•°çš„æ€§è´¨(è¯šæ„æ»¡æ»¡, çœŸçš„ä¸çœ‹çœ‹å—?)</h3>
<p>åç¼–è¯‘å·¥å…·: <code>IDA Pro 7.5 (32-bit)</code></p>
<p>æµ‹è¯•ç¯å¢ƒ: <code>Windows 10 x64</code></p>
<p>æˆ‘ä»¬å†™å‡ºå¦‚ä¸‹æµ‹è¯•ä»£ç :</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//test.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">my_inline_func</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="comment">//lowbit :)</span></span><br><span class="line">    <span class="keyword">return</span> x &amp; (-x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">my_inline_func</span>(n));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ä½¿ç”¨<code>g++ test.cpp -O -o test.exe</code>å‘½ä»¤(<code>-O</code>è¡¨ç¤ºå¼€å¯ä¼˜åŒ–, å³ä½¿ç”¨å†…è”å‡½æ•°)ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶.</p>
<p>åç¼–è¯‘ä¹‹å:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">; main()</span><br><span class="line">.text:00401421 ; int __cdecl main(int argc, const char **argv, const char **envp)</span><br><span class="line">.text:00401421                 public _main</span><br><span class="line">.text:00401421 _main           proc near               ; CODE XREF: sub_4011A0+8Eâ†‘p</span><br><span class="line">.text:00401421</span><br><span class="line">.text:00401421 argc            = dword ptr  8</span><br><span class="line">.text:00401421 argv            = dword ptr  0Ch</span><br><span class="line">.text:00401421 envp            = dword ptr  10h</span><br><span class="line">.text:00401421</span><br><span class="line">.text:00401421 ; __unwind {</span><br><span class="line">.text:00401421                 push    ebp</span><br><span class="line">.text:00401422                 mov     ebp, esp</span><br><span class="line">.text:00401424                 and     esp, 0FFFFFFF0h</span><br><span class="line">.text:00401427                 sub     esp, 20h</span><br><span class="line">.text:0040142A                 call    ___main</span><br><span class="line">.text:0040142F                 mov     dword ptr [esp+1Ch], 0</span><br><span class="line">.text:00401437                 lea     eax, [esp+1Ch]</span><br><span class="line">.text:0040143B                 mov     [esp+4], eax</span><br><span class="line">.text:0040143F                 mov     dword ptr [esp], offset Format ; "%d"</span><br><span class="line">.text:00401446                 call    _scanf</span><br><span class="line">							;è¿™é‡Œåº”è¯¥å°±æ˜¯inlineå‡½æ•°å±•å¼€åçš„æ ·å­äº†, å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰è°ƒç”¨çš„è¿‡ç¨‹</span><br><span class="line">.text:0040144B                 mov     edx, [esp+1Ch]</span><br><span class="line">.text:0040144F                 mov     eax, edx</span><br><span class="line">.text:00401451                 neg     eax</span><br><span class="line">.text:00401453                 and     eax, edx</span><br><span class="line">.text:00401455                 mov     [esp+4], eax</span><br><span class="line">.text:00401459                 mov     dword ptr [esp], offset aD_0 ; "%d\n"</span><br><span class="line">.text:00401460                 call    _printf</span><br><span class="line">.text:00401465                 mov     eax, 0</span><br><span class="line">.text:0040146A                 leave</span><br><span class="line">.text:0040146B                 retn</span><br><span class="line">.text:0040146B ; } // starts at 401421</span><br><span class="line">.text:0040146B _main           endp</span><br></pre></td></tr></tbody></table></figure>
<p>å¯ä»¥çŸ¥é“, inlineå‡½æ•°åªæ˜¯å°±åœ°å±•å¼€, å¹¶æ²¡æœ‰è°ƒç”¨, è¿™ä¸ª"è°ƒç”¨çš„"è¿‡ç¨‹åœ¨åœ°å€ä¸Šæ˜¯è¿ç»­çš„, æ²¡æœ‰æ¶‰åŠåˆ°åœ°å€å’Œå‚æ•°çš„push/popæ“ä½œ.</p>
<p>çœ‹å¾—è¿˜ä¸å¤Ÿæ¸…æ¥š? è®©æˆ‘ä»¬ç‚¹ä¸€ä¸‹F5</p>
<p>å€ŸåŠ©IDA Proå¼ºå¤§çš„Hex-raysæ’ä»¶, å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°mainå‡½æ•°ç¼–è¯‘åå˜æˆäº†è¿™ä¸ªæ ·å­.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> __cdecl <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> **argv, <span class="keyword">const</span> <span class="keyword">char</span> **envp)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">  <span class="keyword">int</span> v4; <span class="comment">// [esp+1Ch] [ebp-4h] BYREF</span></span><br><span class="line"></span><br><span class="line">  __main();	<span class="comment">//è¿™ä¸ªæ˜¯é¢„å¤„ç†, å³ç¨‹åºçš„å…¥å£ç‚¹, ä¸ç”¨ç®¡.</span></span><br><span class="line">  v4 = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;v4);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, v4 &amp; -v4);	<span class="comment">//è¿™å°±æ˜¯inlineå‡½æ•°çš„é­…åŠ› :)</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>ç°åœ¨, inlineå‡½æ•°çš„ä½œç”¨æˆ‘ä»¬çš„ç†è§£å·²ç»å¾ˆé€å½»äº†.</p>
<h1 id="ç®—æ³•ä¼˜åŒ–">ç®—æ³•ä¼˜åŒ–</h1>
<h2 id="ç›¸å…³stl">ç›¸å…³STL</h2>
<p>æ®è¯´set, mapå¸¸æ•°æ¯”è¾ƒå¤§.</p>
<p>ä½†æ˜¯æˆ‘ä¸ä¼šæ‰‹å†™.</p>
<p>æ‰€ä»¥ç”¨ç€å§...</p>
<p>ä½†æ˜¯<code>std::sort()</code>æ®è¯´å¾ˆé«˜çº§, å¿«æ’, å †æ’, æ’å…¥æ’åºä¸‰ç®¡é½ä¸‹, æ€§èƒ½å¾ˆä¸é”™.</p>
<p>åŸºæœ¬ä¸Šåªè¦è‡ªå·±å†™å†™å½’å¹¶, å‰©ä¸‹äº¤ç»™sortå°±å¥½.</p>
<h1 id="ä¸è¦ä½œæ­»">ä¸è¦ä½œæ­»</h1>
<p><strong>è¿™æ˜¯åœ¨èµ›å‰åŠ çš„, æ„åœ¨æé†’å¹¿å¤§é€‰æ‰‹ä¸è¦ä¸ºäº†ä¼˜åŒ–è€Œä½œæ­», æƒ³ä¸€ä¸ªæ›´å¥½çš„ç®—æ³•æˆ–è€…æ‰“æš´åŠ›æ‹¿ä¸ªéƒ¨åˆ†åˆ†ä¸é¦™å—?</strong></p>
<p>ä»¥ä¸‹å†…å®¹åœ¨NOIç³»åˆ—ç«èµ›ä¸­<strong>ä¸èƒ½ç”¨</strong>!!! ä¸åŒ…æ‹¬å…¨éƒ¨, åªåŒ…æ‹¬é€‰æ‰‹ä»¬å¯èƒ½ä¼šä½œæ­»ç”¨åˆ°çš„(æˆ‘çŒœçš„).</p>
<p>è¿˜æ˜¯ä»¥å®˜æ–¹è¯´æ˜ä¸ºå‡†, è¿™é‡Œåªæ˜¯æé†’ä¸€ä¸‹.</p>
<h2 id="pragmaå¦‚ç§è‡ªå¼€o2-æˆ–è€…å¼€æ ˆ">pragma(å¦‚ç§è‡ªå¼€<code>O2</code>, æˆ–è€…å¼€æ ˆ)</h2>
<p>å®˜æ–¹æ˜ä»¤ç¦æ­¢</p>
<p>å¼€æ ˆçš„è¯éœ€è¦åœ¨æœ¬æœºä¿®æ”¹, (æ–¹æ³•è‡ªè¡Œç™¾åº¦). CSPä¸é™åˆ¶æ ˆç©ºé—´.</p>
<h2 id="å†…è”æ±‡ç¼–">å†…è”æ±‡ç¼–</h2>
<p>å®˜æ–¹æ˜ä»¤ç¦æ­¢.</p>
<p>å†…è”æ±‡ç¼–åˆ†ä¸¤ç§, ä¸€ç§æ˜¯<code>__asm__</code>, ä¸€ç§æ˜¯å¼€ä¸€ä¸ªæ•°ç»„æŠŠæœºå™¨ç æ”¾è¿›å», å†<code>memcpy</code>åˆ°å¯æ‰§è¡Œçš„å†…å­˜åŒºåŸŸä¸Š</p>
<p><strong>éƒ½ä¸è¦ç”¨!!!</strong></p>
<p>å°¤å…¶æ˜¯ç¬¬äºŒç§, ä½ åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šç©ç©ç®—äº†, å¾ˆå¯èƒ½åœ¨è¿™å°ç”µè„‘ä¸Šèƒ½è¿è¡Œ, å¦ä¸€å°ç”µè„‘ä¸Šå°±å‡ºé”™. è€Œä¸”è¿™ç±»ç¨‹åºéœ€è¦é«˜æƒé™, å¯æ‰§è¡Œçš„å†…å­˜åŒºåŸŸéƒ½ä¸å¤ªå¥½å¾€é‡Œå†™æ•°æ®.</p>
<p>æœ€é‡è¦çš„, <strong>æ¯”èµ›ç”¨äº†ä¼šçˆ†é›¶!!!</strong></p>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>å¸¸æ•°ä¼˜åŒ–</tag>
        <tag>ç¬”è®°</tag>
        <tag>å¥‡æŠ€æ·«å·§</tag>
      </tags>
  </entry>
  <entry>
    <title>POI2010 - TESIntelligence Test</title>
    <url>/2021/11/21/POI2010-TESIntelligence-Test/</url>
    <content><![CDATA[<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YES puts(<span class="meta-string">"TAK"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NO puts(<span class="meta-string">"NIE"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> len, tc;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt; nxt[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ€è·¯ å¼€äºŒç»´vectorå­˜ä¸€å †æŒ‡é’ˆ nxt[x][y]å°±æ˜¯æ•°å­—xå‡ºç°çš„ç¬¬yæ¬¡çš„ä½ç½®.</span></span><br><span class="line"><span class="comment">//vectoråŠ¨æ€å¼€å†…å­˜ ä¸ä¼šçˆ†ç©ºé—´.</span></span><br><span class="line"><span class="comment">//äºŒåˆ†å»æ‰¾"æ•°å­—kå‡ºç°ç¬¬xæ¬¡çš„ä½ç½®", å®ç°"å¿«é€Ÿè·³è½¬".</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> expected_pos)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = nxt[num].<span class="built_in">size</span>() - <span class="number">1</span>, res = len + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r) {</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(nxt[num][mid] &gt; expected_pos) {</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">            res = mid;</span><br><span class="line">        } <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//return nxt[num][res];</span></span><br><span class="line">    <span class="keyword">return</span> (res == len + <span class="number">1</span> ? res : nxt[num][res]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>); cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cin &gt;&gt; len;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        cin &gt;&gt; tmp;</span><br><span class="line">        nxt[tmp].<span class="built_in">push_back</span>(i);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cin &gt;&gt; tc;</span><br><span class="line">    <span class="keyword">while</span>(tc--) {</span><br><span class="line">        <span class="keyword">int</span> l, a[N];</span><br><span class="line">        cin &gt;&gt; l;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">true</span>; <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l; i++) cin &gt;&gt; a[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l; i++) {</span><br><span class="line">            pos = <span class="built_in">bsearch</span>(a[i], pos);</span><br><span class="line">            <span class="comment">//fprintf(stderr, "a[%d] = %d,\tpos = %d\n", i, a[i], pos);</span></span><br><span class="line">            <span class="keyword">if</span>(pos &gt; len) { flag = <span class="number">0</span>; <span class="keyword">break</span>; }</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        flag ? YES : NO;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>é¢˜è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>Splay</title>
    <url>/2022/03/12/Splay/</url>
    <content><![CDATA[<h1 id="splay">Splay</h1>
<h2 id="å®šä¹‰">å®šä¹‰</h2>
<p>Splayæ˜¯ä¸€ç§BST, å°†è®¿é—®è¿‡çš„ç»“ç‚¹ä¸æ–­æ—‹è½¬åˆ°æ ¹ç»“ç‚¹, åœ¨æ»¡è¶³BSTæ€§è´¨çš„åŒæ—¶ä¿è¯å…¶"å¹³è¡¡", <strong>åŸºäºæ—¶é—´ã€ç©ºé—´å±€éƒ¨æ€§åŸç†ä¼˜åŒ–æŸ¥æ‰¾æ€§èƒ½(è¿™æ ·æ“ä½œä½¿å¾—é«˜é¢‘è®¿é—®çš„ç»“ç‚¹åœ¨ç»å¸¸æ ¹ç»“ç‚¹é™„è¿‘)</strong>.</p>
<p><strong>æœ¬æ–‡çš„BSTæ¯ä¸€ä¸ªç»“ç‚¹åªç»´æŠ¤å•ä¸ªå€¼(è€Œéé”®å€¼å¯¹), ä¸‹é¢è¯´æ³•ä¸­vã€valã€keyéƒ½æŒ‡è¿™ä¸ªå€¼, BSTæ€§è´¨çš„ç»´æŠ¤å®ƒä»¬çš„å¤§å°å…³ç³»åšä¾æ®.</strong></p>
<h3 id="bstæ€§è´¨">BSTæ€§è´¨</h3>
<p>å·¦å­æ ‘ä»»æ„ç»“ç‚¹çš„key<span class="math inline">\(\lt\)</span>æ ¹ç»“ç‚¹key<span class="math inline">\(\lt\)</span>å³å­æ ‘ä»»æ„ç»“ç‚¹key, å³<strong>ä¸­åºéå†å•è°ƒé€’å¢</strong>.</p>
<p>å¸¸è§çš„BSTæœ‰Treapã€Splayã€AVLç­‰.</p>
<h2 id="ç»“ç‚¹ç»“æ„">ç»“ç‚¹ç»“æ„</h2>
<p>å¼€ç»“æ„ä½“æ•°ç»„è®°å½•ä¸¤ä¸ªå­ç»“ç‚¹åŠçˆ¶ç»“ç‚¹çš„æ•°ç»„ä¸‹æ ‡, ç±»ä¼¼äºä¸€ä¸ª<strong>é“¾è¡¨</strong>(å®é™…ä¸Šå¾ˆå¤šæ ‘çŠ¶æ•°æ®ç»“æ„éƒ½æ˜¯æ•°ç»„æ¨¡æ‹Ÿé“¾è¡¨). ç»“ç‚¹åŒæ—¶å­˜å‚¨ç»´æŠ¤çš„ä¿¡æ¯.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> SIZE = <span class="number">1e5</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="comment">//ä¸¤ä¸ªå­ç»“ç‚¹åŠçˆ¶ç»“ç‚¹æ•°ç»„ä¸‹æ ‡, val</span></span><br><span class="line">    <span class="keyword">int</span> s[<span class="number">2</span>], p, v;</span><br><span class="line">    <span class="comment">//å»¶è¿Ÿæ ‡è®°åŠå­æ ‘å¤§å°</span></span><br><span class="line">    <span class="keyword">int</span> dat, size;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–å½“å‰ç»“ç‚¹</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> _v, <span class="keyword">int</span> _p)</span> </span>{</span><br><span class="line">        v = _v, p = _p;</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//Allocate</span></span><br><span class="line">Node tr[SIZE];</span><br></pre></td></tr></tbody></table></figure>
<p>å…¶ä¸­è§„å®š<code>s[0]</code>ä¸ºå·¦å­ç»“ç‚¹, <code>s[1]</code>ä¸ºå³å­ç»“ç‚¹, å³: (åç»­ä»£ç å‡æœªä½¿ç”¨å¦‚ä¸‹define, åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£)</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls s[0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs s[1]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> son s[k]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> son_bro s[k ^ 1]		<span class="comment">//son's brother</span></span></span><br></pre></td></tr></tbody></table></figure>
<h2 id="å•æ—‹æ“ä½œrotate">å•æ—‹æ“ä½œ(rotate)</h2>
<p>æ—‹è½¬éœ€è¦ä¿è¯BSTæ€§è´¨; æ ¹ç»“ç‚¹å˜é‡, å³<code>root</code>éœ€è¦æ›´æ–°; ç»“ç‚¹ç»´æŠ¤çš„ä¿¡æ¯(å¦‚å»¶è¿Ÿæ ‡è®°)éœ€è¦æ›´æ–°.</p>
<p>æ—‹è½¬æ”¹å˜äº†æ˜¯æ ‘çš„å½¢æ€, æœ¬è´¨æ˜¯<strong>æ”¹å˜çˆ¶å­å…³ç³»</strong>.</p>
<figure>
<img src="https://s2.loli.net/2022/02/27/51Z6t4FNpChvJbi.jpg" alt="Splayå•æ—‹"><figcaption aria-hidden="true">Splayå•æ—‹</figcaption>
</figure>
<h4 id="å³æ—‹-å³operatornamezigxæ“ä½œ">å³æ—‹, å³<span class="math inline">\(\operatorname{Zig}(x)\)</span>æ“ä½œ</h4>
<p>é¡¾åæ€ä¹‰å°±æ˜¯å°†<span class="math inline">\(x\)</span>çš„å·¦å­æ ‘ç»•ç€<span class="math inline">\(x\)</span>çš„çˆ¶ç»“ç‚¹<span class="math inline">\(y\)</span>å‘å³æ—‹è½¬.</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯<span class="math inline">\(x \lt x_r \lt y\)</span>, æ•…<span class="math inline">\(x_r\)</span>åº”è¯¥è½¬åˆ°<span class="math inline">\(y_r\)</span>å·¦å­æ ‘çš„ä½ç½®.</p>
<p>è¿™æ ·çš„æ“ä½œé€šè¿‡æ”¹å˜<span class="math inline">\(y\)</span>ä¸<span class="math inline">\(x_r\)</span>ã€<span class="math inline">\(\operatorname{fa}(y)\)</span>ä¸<span class="math inline">\(x\)</span>ã€<span class="math inline">\(x\)</span>ä¸<span class="math inline">\(y\)</span>çš„çˆ¶å­å…³ç³»è¾¾åˆ°.</p>
<h4 id="å·¦æ—‹-å³operatornamezagxæ“ä½œ">å·¦æ—‹, å³<span class="math inline">\(\operatorname{Zag}(x)\)</span>æ“ä½œ</h4>
<p>åŒç†, <span class="math inline">\(x\)</span>çš„å³å­æ ‘ç»•ç€<span class="math inline">\(y\)</span>å‘å·¦æ—‹è½¬, <span class="math inline">\(x_l\)</span>æ¥åœ¨<span class="math inline">\(y\)</span>å³å­æ ‘ä½ç½®.</p>
<p>å³éœ€è¦æ”¹å˜<span class="math inline">\(y\)</span>ä¸<span class="math inline">\(x_l\)</span>ã€<span class="math inline">\(\operatorname{fa}(y)\)</span>ä¸<span class="math inline">\(x\)</span>ã€<span class="math inline">\(x\)</span>ä¸<span class="math inline">\(y\)</span>çš„çˆ¶å­å…³ç³».</p>
<h4 id="æ—‹è½¬ç»“ç‚¹-å³operatornamerotatexæ“ä½œ">æ—‹è½¬ç»“ç‚¹, å³<span class="math inline">\(\operatorname{rotate}(x)\)</span>æ“ä½œ</h4>
<p>ä¸Šè¿°æ“ä½œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ“ä½œ<span class="math inline">\(\operatorname{rotate}(x)\)</span>æ¥å®Œæˆ, å³å®ç°<strong>"è‡ªåŠ¨åˆ¤å®šå·¦å³"çš„å•æ—‹æ“ä½œ</strong>. <span class="math inline">\(x\)</span>æ˜¯<span class="math inline">\(y\)</span>çš„å·¦å­æ ‘å°±å³æ—‹, å³å­æ ‘åä¹‹.</p>
<p>è¯¥æ“ä½œçš„ç²¾é«“å°±æ˜¯åˆ¤å®š<span class="math inline">\(x\)</span>æ˜¯<span class="math inline">\(y\)</span>çš„å·¦ç»“ç‚¹è¿˜æ˜¯å³ç»“ç‚¹.</p>
<p>å‰é¢è¯´è¿‡, "æ—‹è½¬"çš„æœ¬è´¨æ˜¯"æ”¹å˜çˆ¶å­å…³ç³»". æ¯ä¸ªç»“ç‚¹ç»´æŠ¤äº†å¥¹çš„å·¦å³å­æ ‘å’Œçˆ¶ç»“ç‚¹, æ‰€ä»¥è¯¥è¿‡ç¨‹éœ€è¦"äº’è®¤"çˆ¶å­å…³ç³», å³éœ€è¦ä¿®æ”¹ä¸¤ä¸ªç»“ç‚¹çš„ä¿¡æ¯; åŒæ—¶å› ä¸ºæ ‘çš„å½¢æ€è¢«æ”¹å˜, éœ€è¦é‡æ–°ç»Ÿè®¡å»¶è¿Ÿæ ‡è®°ç»´æŒçš„ä¿¡æ¯(å¦‚å­æ ‘å¤§å°).</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rotate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="keyword">int</span> y = tr[x].p, z = tr[y].p;</span><br><span class="line">    <span class="keyword">int</span> k = (tr[y].s[<span class="number">1</span>] == x);</span><br><span class="line">    tr[z].s[tr[z].s[<span class="number">1</span>] == y] = x, tr[x].p = z;</span><br><span class="line">    tr[y].s[k] = tr[x].s[k ^ <span class="number">1</span>], tr[tr[x].s[k ^ <span class="number">1</span>]].p = y;</span><br><span class="line">    tr[x].s[k ^ <span class="number">1</span>] = y, tr[y].p = x;			<span class="comment">//tr[x].s[k]çš„å«ä¹‰æ˜¯å–å¤„äºyxç›´çº¿ä¸Šçš„xçš„å„¿å­, k ^ 1æ˜¯å–å¥¹çš„å…„å¼Ÿ</span></span><br><span class="line">    <span class="built_in">Pushup</span>(y), <span class="built_in">Pushup</span>(x);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¯´äººè¯å°±æ˜¯:</p>
<p><span class="math inline">\(k\)</span>çš„è·å–:</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">k</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *@description è¿”å›xæ˜¯yçš„å“ªä¸ªå„¿å­, å·¦0å³1.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">return</span> (tr[y].s[<span class="number">1</span>] == x);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>rotateä¼ªä»£ç :</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">/* yæ˜¯xçš„çˆ¸çˆ¸, zæ˜¯xçš„çˆ·çˆ·; */</span><br><span class="line">/* ä»¥ä¸‹æ¯ä¸€æ­¥éƒ½éœ€è¦ä¿®æ”¹ä¸¤ä¸ªç»“ç‚¹çš„å€¼, å³äº’è®¤å…³ç³» */</span><br><span class="line">ç”¨zå–åˆ°y, å°†xè½¬åˆ°yçš„ä½ç½®ä¸Š, å¹¶ä¸zäº’è®¤; /* ä»¥ä¸‹ä¸¤éƒ¨å‡éœ€æ“ä½œç»“ç‚¹ä¸å…¶çˆ¶ç»“ç‚¹"äº’è®¤"è¿‡ç¨‹, ä¸å†èµ˜è¿° */</span><br><span class="line">x(æ­¤æ—¶åœ¨yçš„ä½ç½®ä¸Š)çš„å…„å¼Ÿè½¬åˆ°åŸå…ˆx(å³tr[y].s[k])çš„ä½ç½®ä¸Š;</span><br><span class="line">è®©yè½¬åˆ°åŸå…ˆxçš„å…„å¼Ÿçš„ä½ç½®;</span><br><span class="line">åˆ†åˆ«æ›´æ–°y, xå­æ ‘ç»´æŠ¤çš„ä¿¡æ¯;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="åŒæ—‹æ“ä½œsplay">åŒæ—‹æ“ä½œ(splay)</h2>
<p>é€šè¿‡ä¸€æˆ–ä¸¤æ¬¡rotate, å¯ä»¥è°ƒæ•´BSTçš„å½¢æ€, ä½¿å…¶æ›´å¹³è¡¡.</p>
<p>é€šè¿‡è¿‡ç¨‹<span class="math inline">\(\operatorname{splay}(x, goal)\)</span>å°†ç»“ç‚¹<span class="math inline">\(x\)</span>è½¬åˆ°<span class="math inline">\(goal\)</span>çš„å­ç»“ç‚¹.</p>
<p>è§„å®š<span class="math inline">\(y\)</span>æ˜¯<span class="math inline">\(x\)</span>çˆ¶ç»“ç‚¹, <span class="math inline">\(z\)</span>æ˜¯<span class="math inline">\(y\)</span>çˆ¶ç»“ç‚¹, splayåˆ†å…­ç§(3 * 2)æƒ…å†µè®¨è®º.</p>
<ol type="1">
<li>å½“<span class="math inline">\(\operatorname{fa}(x) = \operatorname{Root}\)</span>æ—¶, æ—‹è½¬ä¸€æ¬¡<span class="math inline">\(x\)</span>(å³æˆ–å·¦), å³Zigæˆ–Zag;</li>
<li>å½“<span class="math inline">\(\operatorname{fa}(x) \ne \operatorname{Root}\)</span>ä¸”<span class="math inline">\(z, y, x\)</span>åœ¨ä¸€æ¡ç›´çº¿ä¸Š, æ—‹è½¬ä¸€æ¬¡<span class="math inline">\(y\)</span>, å†åŒæ–¹å‘æ—‹è½¬ä¸€æ¬¡<span class="math inline">\(x\)</span>, å³Zig-Zigæˆ–Zag-Zag;</li>
<li>å½“<span class="math inline">\(\operatorname{fa}(x) \ne \operatorname{Root}\)</span>ä¸”<span class="math inline">\(z, y, x\)</span>å½¢çŠ¶æ˜¯åœ¨ä¸€æ¡ç›´çº¿çš„ä¸­é—´æŠ˜äº†ä¸€ä¸‹, åˆ†åˆ«å¯¹<span class="math inline">\(x\)</span>æ‰§è¡Œä¸¤æ¬¡ä¸åŒæ–¹å‘çš„æ—‹è½¬, å³Zig-Zagæˆ–Zag-Zig.</li>
</ol>
<p>ç”»å›¾ç†è§£å³å¯.</p>
<p>ä½¿ç”¨rotateå°±æ˜¯:</p>
<ul>
<li>æŠ˜çº¿2x</li>
<li>ç›´çº¿yx</li>
</ul>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ“ä½œæ˜¯å°†<span class="math inline">\(x\)</span>è½¬åˆ°<span class="math inline">\(goal\)</span>ä¸‹é¢, æ•…å½“<span class="math inline">\(x\)</span>ä¸<span class="math inline">\(goal\)</span>ä¸ºå…·æœ‰çˆ¶å­å…³ç³»çš„ä¸¤ä¸ªç»“ç‚¹æ—¶ (å³ç¬¬1ã€2ç§æƒ…å†µ)ä¸éœ€è¦æ“ä½œ(å³ä¸éœ€è¦äº¤æ¢å®ƒä»¬).</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Splay</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> goal)</span> </span>{</span><br><span class="line">    <span class="comment">//æŠŠxè½¬åˆ°goalä¸‹é¢</span></span><br><span class="line">    <span class="keyword">while</span>(tr[x].p != goal) {</span><br><span class="line">        <span class="keyword">int</span> y = tr[x].p, z = tr[y].p;</span><br><span class="line">        <span class="keyword">if</span>(z != goal) {</span><br><span class="line">            <span class="keyword">if</span>((tr[z].s[<span class="number">1</span>] == y) ^ (tr[y].s[<span class="number">1</span>] == x)) <span class="built_in">Rotate</span>(x);    <span class="comment">//æŠ˜çº¿å…ˆè½¬xå†è½¬x</span></span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">Rotate</span>(y);                                         <span class="comment">//ç›´çº¿å…ˆè½¬y</span></span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">Rotate</span>(x);                                                  <span class="comment">//ç»Ÿä¸€è½¬x</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(goal == <span class="number">0</span>) Root = x;                                         <span class="comment">//æ›´æ–°æ ¹ç»“ç‚¹(0ä¸ºæ ¹ç»“ç‚¹ä¸‹æ ‡)</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<hr>
<h2 id="æ’å…¥æ“ä½œinsert">æ’å…¥æ“ä½œ(insert)</h2>
<p>è¿‡ç¨‹<span class="math inline">\(\operatorname{insert}(val)\)</span>å°†<span class="math inline">\(val\)</span>æ’å…¥BSTçš„ç›¸åº”ä½ç½®<span class="math inline">\(x\)</span>, å°†æ’å…¥çš„æ•°è½¬åˆ°æ ¹ç»“ç‚¹, å³æ‰§è¡Œ<span class="math inline">\(\operatorname{splay}(x, 0)\)</span>.</p>
<p>æ’å…¥æ—¶éœ€è¦ç»´æŠ¤BSTæ€§è´¨, å°†æ’å…¥çš„è¿™ä¸ªæ•°ä¸å½“å‰èŠ‚ç‚¹æ¯”è¾ƒ, <strong>"å°æ’å·¦, å¤§æ’å³"</strong>.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> v)</span> </span>{</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @param v è¦æ’å…¥å€¼çš„val.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> u = Root, p = <span class="number">0</span>;		<span class="comment">//ä»æ ¹ç»“ç‚¹å¼€å§‹, uä¸ºå½“å‰èŠ‚ç‚¹æ•°ç»„ä¸‹æ ‡, pä¸ºå¥¹çš„çˆ¸çˆ¸ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">while</span>(u) {</span><br><span class="line">        p = u, u = tr[u].s[v &gt; tr[u].v];	<span class="comment">//å°å·¦å¤§å³åœ°æ’ä¸‹å», æ–¹æ‹¬å·é‡Œçš„æ˜¯åˆ¤å®šå·¦å³</span></span><br><span class="line">    }</span><br><span class="line">    u = ++idx;			<span class="comment">//ç»“ç‚¹åˆå¤šäº†ä¸€ä¸ª, idx += 1;</span></span><br><span class="line">    <span class="keyword">if</span>(p) tr[p].s[v &gt; tr[p].v] = u;		<span class="comment">//å°†pçš„å„¿å­uæ’å…¥é€‚å½“ä½ç½®</span></span><br><span class="line">    tr[u].<span class="built_in">init</span>(v, p);	<span class="comment">//ç»™è¿™ä¸ªç‚¹åˆå§‹åŒ–çˆ¸çˆ¸ä¸‹æ ‡å’Œè‡ªèº«value, å¹¶å°†å¤§å°è®¾ä¸º1</span></span><br><span class="line">    <span class="built_in">splay</span>(u, <span class="number">0</span>);		<span class="comment">//è½¬åˆ°æ ¹ç»“ç‚¹</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="æŸ¥è¯¢æŒ‡å®šæ•°çš„æ’ågetrank">æŸ¥è¯¢æŒ‡å®šæ•°çš„æ’å(getRank)</h2>
<p>ä¸ä¼š<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>.</p>
<h2 id="æŸ¥è¯¢ç¬¬kå°çš„æ•°getvalbyrank">æŸ¥è¯¢ç¬¬<span class="math inline">\(k\)</span>å°çš„æ•°(getValByRank)</h2>
<p><span class="math inline">\(\operatorname{getValByRank}(rank)\)</span>æ“ä½œåˆ†ä¸‰ç§æƒ…å†µè®¨è®º: <span class="math display">\[
ç»“ç‚¹ä½äº:\,
\begin{cases}
1. æ‰€æ±‚ç»“ç‚¹ä½äºå·¦å­æ ‘, å·¦å­æ ‘ç»“ç‚¹ä¸ªæ•°\ge rank;\\
2. æ‰€æ±‚ç»“ç‚¹ä¸ºä¸­åºéå†ç¬¬kä¸ªæ•°(å³å·¦å­æ ‘çš„çˆ¶ç»“ç‚¹), å·¦å­æ ‘ç»“ç‚¹ä¸ªæ•° = rank - 1;\\
3. æ‰€æ±‚ç»“ç‚¹ä½äºå³å­æ ‘(rankéœ€è¦å‡å»å·¦å­æ ‘å¤§å°åŠ ä¸€çš„å’Œ), å·¦å­æ ‘ç»“ç‚¹ä¸ªæ•° \lt rank - 1
\end{cases}
\]</span></p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getValByRank</span><span class="params">(<span class="keyword">int</span> rk)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> u = Root;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) {</span><br><span class="line">        <span class="built_in">Pushdown</span>(u);</span><br><span class="line">        <span class="keyword">if</span>(tr[tr[u].s[<span class="number">0</span>]] &gt;= rk) u = tr[u].s[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(tr[tr[u].s[<span class="number">0</span>]] + <span class="number">1</span> == rk) <span class="keyword">return</span> u;</span><br><span class="line">        <span class="keyword">else</span> rk -= (tr[tr[u].s[<span class="number">0</span>]] + <span class="number">1</span>), u = tr[u].s[<span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="åˆ é™¤æ“ä½œdelete">åˆ é™¤æ“ä½œ(delete)</h2>
<p>æ“ä½œ<span class="math inline">\(\operatorname{delete}(x)\)</span>ä»Splayä¸­åˆ é™¤valueä¸º<span class="math inline">\(x\)</span>çš„ç»“ç‚¹.</p>
<p>è¯¥æ“ä½œé¦–å…ˆå°†<span class="math inline">\(x\)</span>è½¬åˆ°æ ¹ç»“ç‚¹, å†åˆå¹¶<span class="math inline">\(x\)</span>çš„å·¦å³å­æ ‘.</p>
<h2 id="æŸ¥è¯¢å‰é©±åç»§getprefixgetsuffix">æŸ¥è¯¢å‰é©±/åç»§(getPrefix/getSuffix)</h2>
<p><span class="math inline">\(x\)</span>çš„å‰é©±: å°äº<span class="math inline">\(x\)</span>çš„æœ€å¤§æ•°;</p>
<p><span class="math inline">\(x\)</span>çš„åç»§: å¤§äº<span class="math inline">\(x\)</span>çš„æœ€å°æ•°.</p>
<p><span class="math inline">\(\operatorname{getPrefix}(x)\)</span>æ“ä½œæŸ¥è¯¢<span class="math inline">\(x\)</span>çš„å‰é©±, å¯ä»¥é€šè¿‡æ’å…¥<span class="math inline">\(x\)</span>(æ’å…¥åä½äºæ ¹ç»“ç‚¹), æ­¤æ—¶<span class="math inline">\(x\)</span>å·¦å­æ ‘ä¸­æœ€å³è¾¹çš„ç»“ç‚¹å³ä¸ºæ‰€æ±‚, æœ€ååˆ é™¤ç»“ç‚¹<span class="math inline">\(x\)</span>;</p>
<p><span class="math inline">\(\operatorname{getSuffix}(x)\)</span>æ“ä½œåä¹‹.</p>
<hr>
<h2 id="ä¾‹é¢˜">ä¾‹é¢˜</h2>
<h3 id="æ–‡è‰ºå¹³è¡¡æ ‘luogu-p3391">æ–‡è‰ºå¹³è¡¡æ ‘(<a href="https://www.luogu.com.cn/problem/P3391">Luogu P3391</a>)</h3>
<blockquote>
<p>ç¿»è½¬ä¸€ä¸ªåŒºé—´ï¼Œä¾‹å¦‚åŸæœ‰åºåºåˆ—æ˜¯<span class="math inline">\(\{5, 4, 3, 2, 1\}\)</span>ï¼Œç¿»è½¬åŒºé—´æ˜¯<span class="math inline">\([2, 4]\)</span>çš„è¯ï¼Œç»“æœæ˜¯<span class="math inline">\(\{5, 2, 3, 4, 1\}\)</span>.</p>
</blockquote>
<p>åœ¨ç»“ç‚¹ä¸Šç»´æŠ¤å»¶è¿Ÿæ ‡è®°<span class="math inline">\(flag\)</span>æ¥åˆ¤å®šç¿»è½¬çŠ¶æ€, é¿å…å¤šæ¬¡ç¿»è½¬é€ æˆæ€§èƒ½ä¸Šçš„æµªè´¹.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹é›¶åŸºç¡€å³ä¸ºå‹å¥½</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">	<span class="keyword">int</span> v, p, s[<span class="number">2</span>], siz;</span><br><span class="line">	<span class="keyword">bool</span> flag;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> _v, <span class="keyword">int</span> _p)</span> </span>{</span><br><span class="line">		v = _v, p = _p;</span><br><span class="line">		siz = <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Node tr[N];</span><br><span class="line"><span class="keyword">int</span> n, cas, Root, idx;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * ä¸€äº›å®å®šä¹‰, ç”¨æ³•ç®€å•æ˜äº†, è·Ÿä¸€å¤§å †æ‚ä¹±æ— ç« çš„ä¸­æ‹¬å·è¯´å†è§!!!</span></span><br><span class="line"><span class="comment"> * ex. 	node(x).init(v, p)		//åˆå§‹åŒ–ç»“ç‚¹xçš„å±æ€§v, p</span></span><br><span class="line"><span class="comment"> * 		siz(left(x))			//è·å–ç»“ç‚¹xçš„å·¦å­èŠ‚ç‚¹size</span></span><br><span class="line"><span class="comment"> *		siz(node(x).ls)			//å¦ä¸€ç§å†™æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls s[0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs s[1]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> isRoot(x) (x == 0)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BST_getPos(fa, val) tr[fa].s[(val) &gt; tr[(fa)].v]	<span class="comment">//åœ¨faç»“ç‚¹ä¸‹é¢æ ¹æ®BSTæ€§è´¨æ’å…¥ä¸€ä¸ªå€¼ä¸ºvalçš„ç»“ç‚¹, åˆ¤å®šç»“ç‚¹ä½ç½®(å³: è¦æ’åœ¨å“ªé‡Œ)</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> node(x) tr[(x)]										<span class="comment">//å¯ä»¥ç†è§£ä¸ºxå·ç»“ç‚¹çš„å¯¹è±¡, æ–¹ä¾¿ä½¿ç”¨ls, rs</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> left(x) tr[(x)].s[0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> right(x) tr[(x)].s[1]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> val(x) tr[(x)].v</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> siz(x) tr[(x)].siz</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> flag(x) tr[(x)].flag</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pa(x) tr[(x)].p</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> son(fa, x) tr[(fa)].s[(x)]							<span class="comment">//è·å–ç»“ç‚¹façš„å„¿å­, å‚æ•°xä¸ºå·¦å³, å·¦0å³1</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LoR(fa, x) (tr[(fa)].s[1] == (x))					<span class="comment">//L or R, xæ˜¯façš„å“ªä¸ªå„¿å­</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pushup</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="built_in">siz</span>(x) = <span class="built_in">siz</span>(<span class="built_in">left</span>(x)) + <span class="built_in">siz</span>(<span class="built_in">right</span>(x)) + <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Pushdown</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">flag</span>(x)) {</span><br><span class="line">		<span class="built_in">swap</span>(<span class="built_in">left</span>(x), <span class="built_in">right</span>(x));</span><br><span class="line">		<span class="built_in">flag</span>(<span class="built_in">left</span>(x)) ^= <span class="number">1</span>;</span><br><span class="line">		<span class="built_in">flag</span>(<span class="built_in">right</span>(x)) ^= <span class="number">1</span>;</span><br><span class="line">		<span class="built_in">flag</span>(x) = <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rotate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="keyword">int</span> y = <span class="built_in">pa</span>(x), z = <span class="built_in">pa</span>(y);</span><br><span class="line">	<span class="keyword">int</span> k = <span class="built_in">LoR</span>(y, x);</span><br><span class="line">	<span class="built_in">son</span>(z, <span class="built_in">LoR</span>(z, y)) = x, <span class="built_in">pa</span>(x) = z;</span><br><span class="line">	<span class="built_in">son</span>(y, k) = <span class="built_in">son</span>(x, k ^ <span class="number">1</span>), <span class="built_in">pa</span>(<span class="built_in">son</span>(x, k ^ <span class="number">1</span>)) = y;</span><br><span class="line">	<span class="built_in">son</span>(x, k ^ <span class="number">1</span>) = y, <span class="built_in">pa</span>(y) = x;</span><br><span class="line">	<span class="built_in">Pushup</span>(y), <span class="built_in">Pushup</span>(x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Splay</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> goal)</span> </span>{</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">pa</span>(x) != goal) {</span><br><span class="line">		<span class="keyword">int</span> y = <span class="built_in">pa</span>(x), z = <span class="built_in">pa</span>(y);</span><br><span class="line">		<span class="keyword">if</span>(z != goal) {</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">LoR</span>(z, y) ^ <span class="built_in">LoR</span>(y, x)) {</span><br><span class="line">				<span class="built_in">Rotate</span>(x);</span><br><span class="line">			} <span class="keyword">else</span> {</span><br><span class="line">				<span class="built_in">Rotate</span>(y);</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		<span class="built_in">Rotate</span>(x);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">isRoot</span>(goal)) Root = x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> v)</span> </span>{</span><br><span class="line">	<span class="keyword">int</span> u = Root, p = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(u) {</span><br><span class="line">		p = u, u = <span class="built_in">BST_getPos</span>(u, v);</span><br><span class="line">	}</span><br><span class="line">	u = ++idx;</span><br><span class="line">	<span class="keyword">if</span>(!<span class="built_in">isRoot</span>(p)) {</span><br><span class="line">		<span class="built_in">BST_getPos</span>(p, v) = u;</span><br><span class="line">	}</span><br><span class="line">	<span class="built_in">node</span>(u).<span class="built_in">init</span>(v, p);</span><br><span class="line">	<span class="built_in">Splay</span>(u, <span class="number">0</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getValByRank</span><span class="params">(<span class="keyword">int</span> rk)</span> </span>{</span><br><span class="line">	<span class="keyword">int</span> u = Root;</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>) {</span><br><span class="line">		<span class="built_in">Pushdown</span>(u);</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">siz</span>(<span class="built_in">left</span>(u)) &gt;= rk) u = <span class="built_in">left</span>(u);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">siz</span>(<span class="built_in">left</span>(u)) == rk - <span class="number">1</span>) <span class="keyword">return</span> u;</span><br><span class="line">		<span class="keyword">else</span> rk -= <span class="built_in">siz</span>(<span class="built_in">left</span>(u)) + <span class="number">1</span>, u = <span class="built_in">right</span>(u);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Output</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">	<span class="built_in">Pushdown</span>(x);</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">left</span>(x)) <span class="built_in">Output</span>(<span class="built_in">left</span>(x));</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">val</span>(x) &gt;= <span class="number">1</span> &amp;&amp; <span class="built_in">val</span>(x) &lt;= n) cout &lt;&lt; <span class="built_in">val</span>(x) &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">right</span>(x)) <span class="built_in">Output</span>(<span class="built_in">right</span>(x)); </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; cas;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n + <span class="number">1</span>; ++i) {</span><br><span class="line">		<span class="built_in">Insert</span>(i);</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">while</span>(cas--) {</span><br><span class="line">		<span class="keyword">int</span> l, r;</span><br><span class="line">		cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">		l = <span class="built_in">getValByRank</span>(l), r = <span class="built_in">getValByRank</span>(r + <span class="number">2</span>);</span><br><span class="line">		<span class="built_in">Splay</span>(l, <span class="number">0</span>), <span class="built_in">Splay</span>(r, l);</span><br><span class="line">		<span class="built_in">flag</span>(<span class="built_in">left</span>(r)) ^= <span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="built_in">Output</span>(Root);</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>æ•°æ®ç»“æ„</tag>
        <tag>å¹³è¡¡æ ‘</tag>
        <tag>BST</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/10/06/hello-world/</url>
    <content><![CDATA[<p>å¦‚é¢˜, è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« .</p>
]]></content>
  </entry>
  <entry>
    <title>äºŒåˆ†</title>
    <url>/2022/02/20/%E4%BA%8C%E5%88%86/</url>
    <content><![CDATA[<h1 id="äºŒåˆ†">äºŒåˆ†</h1>
<h2 id="äºŒåˆ†æŸ¥æ‰¾">äºŒåˆ†æŸ¥æ‰¾</h2>
<p>ç»™å®šä¸€ä¸ªåºåˆ—<span class="math inline">\(\{a\}\)</span>, æŸ¥æ‰¾æŒ‡å®šå…ƒç´ <span class="math inline">\(x\)</span>ä½ç½®.</p>
<h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bsearch</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>{</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r) {</span><br><span class="line">        <span class="keyword">int</span> mid = l + (r - l &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(a[mid] &gt;= x) r = mid;</span><br><span class="line">        <span class="keyword">else</span> l = mid + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a[l] == x ? l : <span class="number">-1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="äºŒåˆ†ç­”æ¡ˆ">äºŒåˆ†ç­”æ¡ˆ</h2>
<p>å•è°ƒåŒºé—´å†…é«˜æ•ˆåœ°æŸ¥æ‰¾æœ€ä¼˜ç­”æ¡ˆ, <strong>å¯ä»¥çœ‹ä½œ"æšä¸¾"çš„ä¼˜åŒ–</strong>. å¸¸ç”¨æ¥è§£å†³"æœ€å¤§å€¼æœ€å°åŒ–"é—®é¢˜.</p>
<h2 id="luogu-p1873-ç æ ‘"><a href="https://www.luogu.com.cn/problem/P1873">Luogu P1873 ç æ ‘</a></h2>
<p>å¦‚æœæšä¸¾<span class="math inline">\([1, 1\times 10^9]\)</span>ä¼šè¶…æ—¶, ä½¿ç”¨äºŒåˆ†ç­”æ¡ˆ.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">LL a[N], m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isValid</span><span class="params">(LL height)</span> </span>{</span><br><span class="line">    LL got = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) {</span><br><span class="line">        got += <span class="built_in">max</span>(a[i] - height, <span class="number">0ll</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> got &gt;= m;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) {</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = <span class="number">1e9</span> + <span class="number">1</span>;		<span class="comment">//é—­åˆçš„åŒºé—´, 1e9éœ€è¦åŠ ä¸€</span></span><br><span class="line">    <span class="keyword">while</span>(l + <span class="number">1</span> &lt; r) {			<span class="comment">//l, rä¸èƒ½ç›¸é‚»</span></span><br><span class="line">        <span class="keyword">int</span> mid = l + (r - l &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isValid</span>(mid)) {</span><br><span class="line">            l = mid;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            r = mid;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯å‘å¼åˆå¹¶</title>
    <url>/2021/11/13/%E5%90%AF%E5%8F%91%E5%BC%8F%E5%90%88%E5%B9%B6/</url>
    <content><![CDATA[<h1 id="æ¢¦å¹»å¸ƒä¸hnoi-2009">æ¢¦å¹»å¸ƒä¸(HNOI-2009)</h1>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/*å¯å‘å¼åˆå¹¶ï¼Œ</span></span><br><span class="line"><span class="comment">æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</span></span><br><span class="line"><span class="comment">è€ƒè™‘ç”¨è´¡çŒ®æ³•æ¥åˆ†æï¼Œæ¯æ¬¡åˆå¹¶åï¼Œé˜Ÿåˆ—é•¿åº¦ä¸€å®šå¤§äºç­‰äºåŸæ¥çŸ­çš„é•¿åº¦çš„ä¸¤å€ï¼Œè¿™æ ·ç›¸å½“äºæ¯æ¬¡åˆå¹¶éƒ½ä¼šè®©çŸ­çš„é•¿åº¦æ‰©å¤§ä¸€å€ä»¥ä¸Šï¼Œæœ€å¤šæ‰©å¤§ logN æ¬¡ï¼Œ</span></span><br><span class="line"><span class="comment">æ‰€ä»¥æ€»å¤æ‚åº¦O(NlogN)ï¼Œæ¯æ¬¡O(logN)ã€‚</span></span><br><span class="line"><span class="comment">å¯¹äºè¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬å…ˆæ±‚å‡ºåŸåºåˆ—çš„ç­”æ¡ˆï¼Œå¯¹äºæ¯ä¸€ç§é¢œè‰²éƒ½ç”¨ç±»ä¼¼é“¾è¡¨çš„æ•°æ®ç»“æ„ä¸²èµ·æ¥ï¼Œå¹¶è®°å½•ä¸‹å°¾èŠ‚ç‚¹ã€‚æ¯æ¬¡ä¿®æ”¹ï¼Œéƒ½æ ¹æ®å¯å‘å¼åˆå¹¶çš„æ–¹æ³•æ¥æš´åŠ›åˆå¹¶ï¼Œ</span></span><br><span class="line"><span class="comment">ç„¶åå¤„ç†ä¸€ä¸‹æ­¤æ¬¡åˆå¹¶å¯¹ç­”æ¡ˆçš„å½±å“ï¼ˆæ˜¾ç„¶ç­”æ¡ˆæ˜¯ä¸å¢çš„ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠ 1 æŸ“æˆ 2 å¹¶ä¸” hsh[1]&gt;hsh[2]ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æŠŠ 2 æ¥åˆ° 1 çš„åé¢ã€‚è¿™æ ·ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæœ¬æ¬¡ä¿®æ”¹åè¿™ä¸ªé“¾çš„é¢œè‰²æ˜¯ 1ï¼ˆé¢œè‰²ä¸º 2 çš„é“¾è¢«åˆ é™¤äº†ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">å¦‚æœæ¥ä¸‹æ¥ä¿®æ”¹é¢œè‰² 2ï¼ˆæ˜¾ç„¶è¿™æ˜¯åˆæ³•çš„ï¼‰ï¼Œä¼šä½¿å¾—æ‰¾ä¸åˆ°é¢œè‰² 2 è€Œåªèƒ½æ‰¾åˆ°é¢œè‰² 1 äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ª f æ•°ç»„ï¼Œè¡¨ç¤ºå½“æˆ‘ä»¬è¦å¯»æ‰¾é¢œè‰² x æ—¶ï¼Œå®é™…ä¸Šéœ€</span></span><br><span class="line"><span class="comment">è¦å¯»æ‰¾é¢œè‰²ä¸º color[x] çš„é“¾ã€‚å¦‚æœé‡åˆ°ä¸Šé¢è¿™ç§æƒ…å†µå°±è¦äº¤æ¢äº¤æ¢ color[x] å’Œ color[y]*/</span> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">100005</span>,maxm=<span class="number">1000005</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,c[maxn],hsh[maxm],sta[maxm],color[maxm],pos[maxm],nxt[maxn],ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="keyword">int</span> ret=<span class="number">0</span>,f=<span class="number">1</span>;<span class="keyword">char</span> ch=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch)){<span class="keyword">if</span> (ch==<span class="string">'-'</span>)f=-f;ch=<span class="built_in">getchar</span>();}</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch)) ret=(ret&lt;&lt;<span class="number">3</span>)+(ret&lt;&lt;<span class="number">1</span>)+ch-<span class="string">'0'</span>,ch=<span class="built_in">getchar</span>();</span><br><span class="line">	<span class="keyword">return</span> ret*f;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=pos[x];i;i=nxt[i]) ans-=(c[i<span class="number">-1</span>]==y)+(c[i+<span class="number">1</span>]==y);<span class="comment">//åˆå¹¶æ—¶éœ€è¦æ³¨æ„ç»†èŠ‚ y x y </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=pos[x];i;i=nxt[i]) c[i]=y;<span class="comment">//æŠŠåŸæœ‰çš„xç»Ÿç»Ÿå˜æˆy </span></span><br><span class="line">    nxt[sta[x]]=pos[y],pos[y]=pos[x],hsh[y]+=hsh[x];<span class="comment">//å®è´¨å°±æ˜¯å†ä¸é‡æ–°å»ºç«‹å…³ç³»çš„åŒæ—¶ï¼Œä¾æ—§åˆ©ç”¨å·²æœ‰çš„å…³è”å…³ç³»ã€‚æ¢ä¸€ä¸ªè§£é‡Šå°±æ˜¯ä¸‹æ¬¡å¤„ç†é¢œè‰²yæ—¶ </span></span><br><span class="line">    pos[x]=sta[x]=hsh[x]=<span class="number">0</span>;                         <span class="comment">//å…ˆæŠŠåŸæœ‰çš„xå¤„ç†æ‰(åˆšåˆšæ”¹å˜æˆçš„yçš„x)ï¼Œç„¶åå†æ¥è§£å†³åŸæœ‰çš„yï¼Œç­‰ä»·äºæŠŠxæ¥åˆ°yçš„å±è‚¡åé¢</span></span><br><span class="line">	                                                <span class="comment">//æœ€åæŠŠxåŸæœ‰çš„ä¸éœ€è¦çš„å…³è”å…³ç³»å¹²æ‰ </span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    n=<span class="built_in">read</span>(),m=<span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        c[i]=<span class="built_in">read</span>(),color[c[i]]=c[i];</span><br><span class="line">        ans+=c[i]!=c[i<span class="number">-1</span>];	<span class="comment">//ç»Ÿè®¡æ®µæ•° </span></span><br><span class="line">        <span class="keyword">if</span> (!pos[c[i]]) sta[c[i]]=i;</span><br><span class="line">        hsh[c[i]]++,nxt[i]=pos[c[i]],pos[c[i]]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (m--){</span><br><span class="line">        <span class="keyword">int</span> opt=<span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">if</span> (opt==<span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> x=<span class="built_in">read</span>(),y=<span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">if</span> (x==y) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (hsh[color[x]]&gt;hsh[color[y]]) <span class="built_in">swap</span>(color[x],color[y]);</span><br><span class="line">            <span class="keyword">if</span> (!hsh[color[x]]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">merge</span>(color[x],color[y]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> nxt[N], pos[N], raw[N], a[N], last[N], color[N], cnt[N];</span><br><span class="line"><span class="keyword">int</span> n, m, ans;</span><br><span class="line"><span class="comment">//int marge(int, int);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//çœ‹stdçœ‹ä¸æ‡‚, æ€»ç»“å‡ºä¸€ä¸ªå°æŠ€å·§</span></span><br><span class="line"><span class="comment">//åµŒå¥—çš„æ•°ç»„ä¸€ä¸ªä¸ªæ¨¡æ‹Ÿå¤ªéš¾, å¯ä»¥ç”¨ä¸€ä¸‹OOPçš„æ€æƒ³æ–¹ä¾¿ç†è§£</span></span><br><span class="line"><span class="comment">//å°±æ¯”å¦‚æ¡¶æ’çš„æ—¶å€™æŠŠcnt[a[i]]ç†è§£ä¸ºa[i].cntå°±èˆ’æœå¾ˆå¤š</span></span><br><span class="line"><span class="comment">//é˜…è¯»è¿™ä¸ªä»£ç æ—¶éœ€è¦ç»å¸¸è¿™æ ·æ€è€ƒ. ä¾‹å¦‚color[raw[i]]å¯ä»¥ç†è§£ä¸ºraw[i].color, æŠŠåŒ…åœ¨ä¸­æ‹¬å·é‡Œè¾¹çš„ä¸œè¥¿çœ‹æˆobjectå°±å¥½</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> </span>{</span><br><span class="line">  <span class="keyword">int</span> x = <span class="number">0</span>, w = <span class="number">1</span>;	<span class="comment">//xæ˜¯æ•°å­—, wæ˜¯ç¬¦å·ä½</span></span><br><span class="line">  <span class="keyword">char</span> ch = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (ch &lt; <span class="string">'0'</span> || ch &gt; <span class="string">'9'</span>) {  <span class="comment">//!isdigit(ch)</span></span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">'-'</span>) w = <span class="number">-1</span>;        </span><br><span class="line">    ch = <span class="built_in">getchar</span>();               </span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">while</span> (ch &gt;= <span class="string">'0'</span> &amp;&amp; ch &lt;= <span class="string">'9'</span>) {  <span class="comment">//isdigit(ch)</span></span><br><span class="line">    x = x * <span class="number">10</span> + (ch - <span class="string">'0'</span>); </span><br><span class="line">    ch = <span class="built_in">getchar</span>();</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> x * w;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//Example:</span></span><br><span class="line"><span class="comment">//int n = read();</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">marge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="comment">//æŠŠæ‰€æœ‰xå˜æˆy, å°ä¼˜åŒ–è§mainå‡½æ•°è°ƒç”¨çš„margeåœ°æ–¹</span></span><br><span class="line">    <span class="comment">//ä¸‹é¢è¿™å‡ è¡Œ, é“¾è¡¨çš„éå†, æ¯”è¾ƒéš¾æ‡‚.</span></span><br><span class="line">    <span class="comment">//æ³¨æ„åˆ°ç­”æ¡ˆåº”è¯¥æ˜¯åªå‡ä¸å¢çš„, å› ä¸ºä¿®æ”¹çš„æœ¬è´¨æ˜¯"åˆå¹¶", "æ®µæ•°"è¶Šåˆå¹¶è¶Šå°‘. è¿™ä¹Ÿæ˜¯è¿™é¢˜æœ€éš¾æƒ³çš„åœ°æ–¹, ä¸æ˜¯ä¸€ä¸ªä¸ªä¿®æ”¹å†ç»Ÿè®¡æ®µæ•°, æ˜¯ç”¨é“¾è¡¨å­˜å‚¨åå†æ¨¡æ‹Ÿ"åˆå¹¶"æ›´æ–°ç­”æ¡ˆ.</span></span><br><span class="line">    <span class="comment">//è¿™ä¸ªåŠ æ³•ç”¨å¾—å¾ˆå¥½, å› ä¸ºè·Ÿå‰é¢çš„ä¸€æ ·æ„å‘³ç€å°‘äº†ä¸€æ®µ è·Ÿåé¢çš„ä¸ä¸€æ ·æ„å‘³ç€æœ‰å°‘äº†ä¸€æ®µ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = pos[x]; i; i = nxt[i]) ans -= (raw[i - <span class="number">1</span>] == y) + (raw[i + <span class="number">1</span>] == y);    <span class="comment">//æ›´æ–°ç­”æ¡ˆ</span></span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿ"åˆå¹¶"çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = pos[x]; i; i = nxt[i]) raw[i] = y;    <span class="comment">//ä¿®æ”¹x ---&gt; y</span></span><br><span class="line">    nxt[last[x]] = pos[y];  <span class="comment">//æ›´æ–°å°¾èŠ‚ç‚¹, å³æ¯æ®µæœ€åä¸€ä¸ª</span></span><br><span class="line">    pos[y] = pos[x];    <span class="comment">//æ›´æ–°ä½ç½®</span></span><br><span class="line">    cnt[y] += cnt[x];   <span class="comment">//åŠ ä¸Šä¸ªæ•°</span></span><br><span class="line">    pos[x] = last[x] = cnt[x] = <span class="number">0</span>;    <span class="comment">//åˆå¹¶å®Œä¹‹åxæ²¡äº†</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">//ios_base::sync_with_stdio(false); cin.tie(0);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//cin &gt;&gt; n &gt;&gt; m;</span></span><br><span class="line">    n = <span class="built_in">read</span>(); m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) {</span><br><span class="line">        <span class="comment">//cin &gt;&gt; raw[i];</span></span><br><span class="line">        raw[i] = <span class="built_in">read</span>();</span><br><span class="line">        color[raw[i]] = raw[i]; <span class="comment">//color[x]ç»Ÿè®¡ç¬¬xä¸ªé¢œè‰²</span></span><br><span class="line">        ans += (raw[i] != raw[i - <span class="number">1</span>]);  <span class="comment">//é¢„å¤„ç†ä¸€ä¸‹"æ®µæ•°", è¿™ä¸ªæ–¹æ³•å¾ˆå·§å¦™, è¯»å…¥çš„æ—¶å€™åªè¦è·Ÿå‰é¢çš„ä¸ä¸€æ ·å°±è¡¨ç¤ºåˆæœ‰ä¸€æ®µ</span></span><br><span class="line">        cnt[raw[i]] ++; <span class="comment">//cntå°±æ˜¯æ¡¶, å³è®¡æ•°æ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span>(!pos[i]) last[i] = raw[i];     <span class="comment">//æ¯ç§å¸ƒä¸æœ€åä¸€ä¸ªçš„ä½ç½®</span></span><br><span class="line">        nxt[i] = pos[raw[i]]; pos[raw[i]] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m --) {</span><br><span class="line">        <span class="keyword">int</span> op1, op2, op3;</span><br><span class="line">        <span class="comment">//cin &gt;&gt; op1;</span></span><br><span class="line">        op1 = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">if</span>(op1 == <span class="number">1</span>) {</span><br><span class="line">            <span class="comment">//cin &gt;&gt; op2 &gt;&gt; op3;</span></span><br><span class="line">            op2 = <span class="built_in">read</span>(); op3 = <span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">if</span>(cnt[color[op1]] &gt; cnt[color[op2]]) <span class="built_in">swap</span>(color[op1], color[op2]);     <span class="comment">//å°ä¼˜åŒ–, æŠŠxå˜æˆyå’ŒæŠŠyå˜æˆx, ä¹‹åçš„ç­”æ¡ˆæ˜¯ä¸å—å½±å“çš„, æ‰€ä»¥æ”¹æ“ä½œæ¬¡æ•°å°‘çš„.</span></span><br><span class="line">            <span class="keyword">if</span>(op2 == op3 || !cnt[color[op2]]) <span class="keyword">continue</span>;    <span class="comment">//stdè€ƒè™‘å¾—å¾ˆå‘¨å…¨, èˆå»ä¿®æ”¹æ²¡æœ‰çš„å…ƒç´ å’Œ"ä¿®æ”¹ä¸ªå¯‚å¯", é˜²æ­¢è¢«å¡.</span></span><br><span class="line">            <span class="built_in">marge</span>(op2, op3);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>é¢˜è§£</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å›½åº†æ¨¡æ‹Ÿèµ›åæ€»ç»“</title>
    <url>/2021/10/17/%E5%9B%BD%E5%BA%86%E6%A8%A1%E6%8B%9F%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="èµ›åæ€»ç»“">èµ›åæ€»ç»“</h1>
<p><strong>æ³¨: æ²¡å†™å®Œ, å› ä¸ºæœ‰çš„é¢˜è¿˜æ²¡è¿‡.</strong></p>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>è¿™ä¸ªæ–‡æ¡£ä¸ä¸€å®šåœ¨å†™ç²¾å¦™çš„ç®—æ³•, æœ‰çš„éƒ¨åˆ†ç”šè‡³ä¸æ˜¯åœ¨åˆ†ææ»¡åˆ†è§£æ³•, æ›´å¤šçš„æ˜¯æ€ä¹ˆå¾—<strong>è¯¥å¾—çš„</strong>åˆ†ä»¥åŠæ€ä¹ˆå‡å°‘ä¸å¿…è¦çš„å¤±åˆ†.</p>
<p>å³: ç›®æ ‡æ˜¯åœ¨jç»„å¤èµ›ä¸­åˆ†æ•°æœ€å¤§åŒ–.</p>
<h2 id="section">2021/10/01</h2>
<h3 id="t1">T1</h3>
<p>åœ¨è°ƒé”™ä¸Šæµªè´¹å¤ªå¤šæ—¶é—´äº†, æœ€åæ‰å‘ç°ç®—æ³•æ²¡æœ‰é—®é¢˜, æ˜¯<strong>switchè¯­å¥</strong>çš„é—®é¢˜!!!</p>
<p>æ•™è®­: åœ¨å†™ä»£ç ä¹‹å‰æ¨æ€è·¯çš„æ—¶å€™ä¸€å®šè¦æ˜ç¡®å®ƒçš„<strong>æ­£ç¡®æ€§</strong>! å‘ç°è¿è¡Œçš„ç»“æœä¸ä¸€æ ·æ—¶<strong>ä¸è¦è½»æ˜“æ”¹ä»£ç , æ›´ä¸è¦è½»æ˜“æ”¹ç®—æ³•!</strong></p>
<p>è°ƒè¯•å°æŠ€å·§: è¾“å‡ºä¸€äº›ä¸œè¥¿ or æ³¨é‡Šæ‰å¤§æ®µä»£ç , è¿™äº›æ–¹æ³•ä¸»è¦æ˜¯å¿«é€Ÿå®šä½å‡ºé”™çš„åœ°æ–¹çš„, å®åœ¨ä¸è¡Œå¯ä»¥ä¸‹æ–­ç‚¹è°ƒè¯•(ç”¨gdbå¯ä»¥çš„, æ³¨æ„åŠ debug symbol). åœ¨æ€€ç–‘ç®—æ³•å‡ºé—®é¢˜çš„æ—¶å€™åœ¨çº¸ä¸Šæ¨, <strong>ä¸è¦åŠ¨ä»£ç </strong>!!!</p>
<p>è¿™é¢˜çš„æ­£è§£æ˜¯æ¨¡è¿ç®—, å¯ä»¥å¿«é€Ÿå®šä½åˆ°å¾ªç¯è¿è¡Œå¤šæ¬¡åçš„æŒ‡ä»¤, ä¸å¿…ä¸€æ¬¡æ¬¡æ¨¡æ‹Ÿäº†.</p>
<p>(è€ƒåœºä¸Šå†™çš„æ˜¯ç›´æ¥æ¨¡æ‹Ÿ, æ‹¿æŒ‡é’ˆä¸€ä¸ªä¸€ä¸ªèµ°çš„é‚£ç§, æ‹¿äº†60åˆ†å·²ç»å¾ˆä¸é”™äº†)</p>
<p>æ­£è§£:</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>] = {<span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>};</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dy[<span class="number">4</span>] = {<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>};</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> cmd[<span class="number">4</span>] = {<span class="string">'E'</span>, <span class="string">'S'</span>, <span class="string">'W'</span>, <span class="string">'N'</span>};</span><br><span class="line"></span><br><span class="line">string ops;</span><br><span class="line"><span class="keyword">int</span> t, currx, curry, cnt[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">go</span><span class="params">(<span class="keyword">int</span> op)</span> </span>{</span><br><span class="line">    currx += dx[op]; curry += dy[op];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cin &gt;&gt; ops &gt;&gt; t;</span><br><span class="line">    <span class="comment">//å…ˆè¿è¡Œä¸€éå‘½ä»¤ä¸²</span></span><br><span class="line">    <span class="keyword">int</span> oplen = ops.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; oplen; i ++) {</span><br><span class="line">        <span class="keyword">char</span> ch = ops[i];</span><br><span class="line">        <span class="comment">//ä¸çŸ¥é“ä¸ºä»€ä¹ˆswitchä¼šå‡ºé—®é¢˜, æ¯”èµ›å°±æ˜¯åœ¨è¿™é‡Œå¡äº†åŠå°æ—¶</span></span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'E'</span>) <span class="built_in">go</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'S'</span>) <span class="built_in">go</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'W'</span>) <span class="built_in">go</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'N'</span>) <span class="built_in">go</span>(<span class="number">3</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cishu = t / oplen;  <span class="comment">//æ¯ä¸ªæ“ä½œæ‰§è¡Œcishué, ä½†è¿˜å¯èƒ½æœ‰å¤šä½™</span></span><br><span class="line">    <span class="keyword">int</span> pos = t % oplen;    <span class="comment">//æœ€åä¸€ä¸ªæ“ä½œçš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span>(cishu == <span class="number">0</span>) <span class="keyword">goto</span> OUTPUT; <span class="comment">//æŒ‡ä»¤æ•° &gt;= t --&gt; å·²ç»èµ°å®Œäº†, ç›´æ¥è¾“å‡ºå°±è¡Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§æƒ…å†µ, å³len &lt; t, è¦å¾ªç¯å¤šæ¬¡</span></span><br><span class="line">    currx *= cishu; curry *= cishu;  <span class="comment">//èµ°ä¸€æ¬¡èµ°åˆ°äº†å½“å‰çš„(x, y), èµ°cishuæ¬¡å°±æ„å‘³ç€æ¯ä¸ªç‚¹éƒ½èµ°äº†cishuæ¬¡, å¯¹ç»“æœçš„å½±å“æ±‚ç§¯å³å¯</span></span><br><span class="line">    <span class="comment">//å¥½ç°åœ¨è¿˜å‰©å‡ æ­¥, èµ°å®Œå®ƒ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pos; i ++) {</span><br><span class="line">        <span class="keyword">char</span> ch = ops[i];</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'E'</span>) <span class="built_in">go</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'S'</span>) <span class="built_in">go</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'W'</span>) <span class="built_in">go</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">'N'</span>) <span class="built_in">go</span>(<span class="number">3</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">OUTPUT: cout &lt;&lt; currx &lt;&lt; <span class="string">' '</span> &lt;&lt; curry &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="t2">T2</h3>
<p>åœ¨æ¨æ¨¡æ‹Ÿåˆ†è§£è´¨å› æ•°æ—¶æµªè´¹å¤ªå¤šæ—¶é—´äº†, è¿™ç§è€ƒ"æ¿å­"çš„æ•°å­¦é¢˜è¦åœ¨å¹³æ—¶å¤šåš. è€ƒåœºä¸Šè¦å‡å°‘<strong>æ¨æ¿å­</strong>çš„æ—¶é—´.</p>
<p>å¦å¤–è¿˜å¥½è¿™é¢˜æ²¡æ‰“è¡¨, "åªè¦æ˜¯æ•°å­¦é¢˜å°±æ‰“è¡¨"ç»ˆç©¶æ˜¯ä¸€ç§"éª—åˆ†"çš„å¿ƒæ€. è¿˜æ˜¯è¦å¤šæ¨å¼å­.</p>
<p>é™„: è®¡ç®—ä¸€ä¸ªæ•°ç´ å› æ•°ä¸ªæ•°çš„ä»£ç </p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= x; i ++) {</span><br><span class="line">        <span class="keyword">if</span>(x % i == <span class="number">0</span>) {</span><br><span class="line">            res ++;</span><br><span class="line">            x /= i;</span><br><span class="line">            i --;	<span class="comment">//è¿™è¡Œæ˜¯å°è¯•å†æ‹¿è¿™ä¸ªæ•°é™¤ä¸€é, å› ä¸ºä¸€ä¸ªæ•°å¯èƒ½æœ‰å¤šä¸ªç›¸åŒçš„è´¨å› å­.</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>è¿˜æœ‰å°±æ˜¯ç¬¬åä¸ªç‚¹<strong>å…·ä½“çš„</strong>æ•°æ®ç»™æˆ‘ä»¬äº†, æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®, è¿™ä¸ªO(N*sqrt(N))çš„ç®—æ³•æ˜¾ç„¶è¦ç®—å¾ˆä¹…(åœ¨æˆ‘ç”µè„‘ä¸Šç®—äº†<strong>ä¸€ä¸ªåŠå°æ—¶</strong>), æ‰€ä»¥åªèƒ½ç”¨ç‰¹åˆ¤. è€ƒè¯•çš„æ—¶å€™å¯ä»¥ä¼˜å…ˆç”¨æš´åŠ›æˆ–æ­£è§£ç®—ç€è¿™ç§æ•°æ®, å¾—åˆ°ç‰¹åˆ¤å°±è¡Œ.</p>
<p>æ³¨: è¿™é“æ˜¯æˆ‘ä¸¤å¤©æ¨¡æ‹Ÿèµ›ä¸­å”¯ä¸€è§‰å¾—åšå¾—è¿˜ä¸é”™, æ²¡å•¥å¤ªå¤§é—æ†¾çš„é¢˜.</p>
<p>æ³¨2: æˆ‘çš„ç”µè„‘ç®—äº†<strong>ä¸€ä¸ªåŠå°æ—¶</strong>, ç»ˆäºç®—å‡ºæœ€åä¸€ä¸ªç‚¹çš„ç‰¹åˆ¤æ˜¯<code>564714</code>!!! ä½†æ˜¯ä¸ºä»€ä¹ˆç¬¬å…«ä¸ªç‚¹è¿˜æ²¡è¿‡??? æœ€åæ˜¯90åˆ†.</p>
<h3 id="t3">T3</h3>
<p>æ¨¡æ‹Ÿé¢˜, å­—å¤ªå¤šè€ƒè¯•çš„æ—¶å€™æ‡’å¾—çœ‹äº†. ä¹‹åè¿™ç§é¢˜è¦å¤šæƒ³æƒ³! è‡³å°‘æŠŠæ ·ä¾‹ç®—ç®—, çŸ¥é“æ¨¡æ‹Ÿçš„è¿‡ç¨‹.</p>
<p><del>ç°åœ¨èµ›åè®¢æ­£çš„æ—¶å€™ä¹Ÿæ‡’å¾—çœ‹</del></p>
<h3 id="t4">T4</h3>
<p>å››è”é€šé—®é¢˜, æŠŠä¸Šä¸‹å·¦å³å½“æˆç›¸é‚»çš„èŠ‚ç‚¹ç”¨bfsè®¿é—®</p>
<h2 id="section-1">2021/10/03</h2>
<h3 id="t1-1">T1</h3>
<p>ä¸€å®šè¦æ³¨æ„çœ‹æ¸…<strong>æ•°æ®èŒƒå›´</strong>! å°±æ¯”å¦‚è¿™é“é¢˜è¯´äº† <span class="math display">\[
N &lt; 1,000,000
\]</span> å°±ä¸€å®šè¦å¼€1e6, <strong>å®è‚¯å¼€å¤§ä¸€ç‚¹ä¹Ÿä¸è¦å¼€å°</strong>!!! ä¸€ä½æ•°ç»„ä¸ä¼šå› ä¸ºå¼€å¾—è·Ÿé¢˜ä¸­ä¸€æ ·å¤§è€ŒMLE!!!</p>
<p>æ•™è®­: <strong>1e5çš„ä»£ç 52åˆ†, 1e6å°±acäº†.</strong></p>
<p>çœŸçš„æ˜¯å¾ˆå¯æƒœçš„, æ˜æ˜æ»¡åˆ†ç®—æ³•æƒ³å‡ºæ¥äº†, æ€è·¯å°±æ˜¯æ­£ç¡®çš„, ç”šè‡³ä»£ç å†™å¾—éƒ½æ²¡é—®é¢˜. å°±æ˜¯å› ä¸ºæ•°ç»„æ²¡å¼€å¤§, å¤±åˆ†æƒ¨é‡.</p>
<p>æ€è·¯å†è¯´ä¸€ä¸‹å§, å‰ç¼€å’Œ. è¿™ç§<strong>åŒºé—´è¯¢é—®æˆ–æ“ä½œä¸€ä½æ•°ç»„é—®é¢˜çš„ç®—æ³•</strong>åœ¨æˆ‘ç›®å‰çš„çŸ¥è¯†èŒƒå›´å†…å¤§å¤šåªä¼šæ˜¯<strong>å‰ç¼€å’Œ, å·®åˆ†, æ ‘çŠ¶æ•°ç»„, çº¿æ®µæ ‘</strong>äº†, æ›´é«˜çº§çš„æ„Ÿè§‰jç»„è€ƒä¸åˆ°, ç°åœ¨ä¹Ÿä¸æ˜¯å­¦è¿™ç§ä¸œè¥¿çš„æ—¶å€™.</p>
<blockquote>
<p>è™½ç„¶1000ä¸‡ä¸ªæ•°ä¼¼ä¹å¾ˆå¤š, ä½†æ˜¯, å¦‚æœè¿™äº›æ•°æ˜¯8å­—èŠ‚çš„æ•´æ•°, é‚£ä¹ˆå°†å ç”¨å¤§è‡´<strong>80MB</strong>.</p>
<p><em>Introduction to Algorithms(3rd edition)</em></p>
</blockquote>
<h3 id="t2-1">T2</h3>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>;</span><br><span class="line"><span class="keyword">int</span> array[N];	<span class="comment">//å¤§çº¦å ç”¨4MBç©ºé—´</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿™é“é¢˜å› ä¸ºå¼€äº†1e8çš„æ•°ç»„, ç”¨äº†memsetå¯¼è‡´<strong>å…¨éƒ¨çš„ç‚¹MLE</strong>.</p>
<p><strong>æ•°ç»„ä¸è¦å¼€å¤ªå¤§!!! (1e8ä¸ªintçº¦ç­‰äº380MB)</strong></p>
<p>æœ¬æ¥å¯ä»¥å¾—60åˆ†æš´åŠ›åˆ†, ç»“æœè¿™é¢˜å› ä¸ºè¿™ä¸ªçˆ†é›¶äº†.</p>
<p>æœ¬é¢˜çš„æ­£è§£æ˜¯<strong>ç¦»çº¿è¯¢é—®</strong>, å¹¶è®°å½•æ“ä½œ, ç±»ä¼¼äº<strong>åŒ–ç®€</strong>åˆ°æœ€åä¸€ä¸ªæ“ä½œ, å°±ä¸å¿…æ¨¡æ‹Ÿäº†.</p>
<p>èµ›åè¿˜ä»¥ä¸ºæ˜¯ç”¨äº†å‡ ä¸ªç„å­¦ä¼˜åŒ–å¯¼è‡´çš„é—®é¢˜.</p>
<p>è¯´åˆ°ç„å­¦ä¼˜åŒ–, åœ¨è¿™é‡Œè®°å½•å‡ ä¸ªå¥½ç”¨çš„ç„å­¦ä¼˜åŒ–:(å¥½åƒæ‰¯å¾—æœ‰ç‚¹è¿œäº†)</p>
<h4 id="cinä¼˜åŒ–">cinä¼˜åŒ–</h4>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line">ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">cin.<span class="built_in">tie</span>(<span class="number">0</span>);	<span class="comment">//cin.tie(nullptr)åœ¨C++11åŠä»¥ä¸Šå¯ç”¨</span></span><br></pre></td></tr></tbody></table></figure>
<p>(è¿™ä¸¤è¡Œçš„æ„æ€æ˜¯å…³é—­ä¸stdioçš„åŒæ­¥, ä»¥æå‡cin, coutçš„é€Ÿåº¦. åœ¨IOæ¯”è¾ƒå¤šçš„æ—¶å€™å¾ˆå¥½ç”¨. <strong>æ³¨æ„:ç”¨äº†è¿™ä¸ªä¼˜åŒ–å°±ä¸èƒ½ç”¨stdioå†…çš„å‡½æ•°å¦‚<code>printf()</code>å’Œ<code>scanf()</code></strong>. å½“ç„¶printfå’Œscanfçš„é€Ÿåº¦æ˜¯æ›´å¿«çš„, å¦‚æœä¼šå†™å¿«è¯»å¿«å†™é‚£æ›´å¿«, <code>putchar()</code>å’Œ<code>getchar()</code>çš„é€Ÿåº¦ä¸æ˜¯å¹çš„. )</p>
<h4 id="å¯„å­˜å™¨æ“ä½œ">å¯„å­˜å™¨æ“ä½œ</h4>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++)</span><br></pre></td></tr></tbody></table></figure>
<p>ç›´æ¥æ“ä½œå¯„å­˜å™¨, è¿™æ ·æ›´å¿«.</p>
<p>p.s. cspç”¨ä¸äº†å†…è”æ±‡ç¼–, æ‰€ä»¥ä¸è¦ä½œæ­», è¿™ä¸ªç”¨ç”¨å°±è¡Œäº†</p>
<h4 id="è¡Œå†…å‡½æ•°inline">è¡Œå†…å‡½æ•°(inline)</h4>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">add</span>(<span class="number">1</span>, <span class="number">1</span>);	<span class="comment">//ç›´æ¥å°±åœ°å±•å¼€å‡½æ•°, æ²¡æœ‰è°ƒç”¨å…³ç³»</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç›¸å½“äº</span></span><br><span class="line"><span class="comment">    inline int add(int x, int y) {</span></span><br><span class="line"><span class="comment">    	return x + y;</span></span><br><span class="line"><span class="comment">	}</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>é€‚ç”¨äºä»£ç å°‘, è°ƒç”¨é¢‘ç¹çš„å‡½æ•°.</p>
<p>å‡½æ•°è°ƒç”¨æ—¶ä¼šå°†å‚æ•°, åŸºå€è¿™äº›ä¸œè¥¿å‹æ ˆ. æœ€åcall. è¿è¡Œç»“æŸåä¼šå‹å…¥è¿”å›åœ°å€ç­‰ä¿¡æ¯(è¿™äº›ä¸œè¥¿å¿«å¿˜äº†, ä¸å¯¹è¯·æŒ‡æ­£). è¿™æ ·è°ƒç”¨ä¸€æ¬¡æ— ç–‘æµªè´¹äº†å¾ˆå¤šæ—¶é—´ç²¾åŠ›.(æœ‰ç©ºçš„è¯è´´ä¸€ä¸‹åæ±‡ç¼–ä»£ç çœ‹å¾—æ›´æ¸…æ¥š)</p>
<p>ç”¨<code>inline</code>å®šä¹‰ä¼šåœ¨è°ƒç”¨å¤„å°±åœ°å±•å¼€, ä¸ªäººè§‰å¾—æ¯”è¾ƒåƒ<code>#define</code>(?)</p>
<p>ä½†æ˜¯è¿™ä¹ˆç”¨ä¼šè®©ä»£ç ç¼–è¯‘åå˜å¾—æ›´å¤§, å®é™…å¼€å‘ä¸­è¦æ…ç”¨. (ç®—æ³•æ¯”èµ›ä¸­æ²¡å…³ç³»)</p>
<h3 id="t3-1">T3</h3>
<p>è¿™é‡Œå‘ç°äº†ä¸¤è½®æ¸¸æˆä¸­çš„å•è°ƒæ€§è´¨, ä½†æ˜¯ç«Ÿç„¶åœ¨çº ç»“<strong>ç”¨å“ªä¸ªæ•°æ®ç»“æ„å®ç°</strong>!!!</p>
<p>æœ€åæ—¶é—´<strong>å…¨æµªè´¹äº†</strong>, æš´åŠ›éƒ½æ²¡å†™å®Œ.</p>
<p>ä»¥åç®—æ³•è¾ƒä¸ºç®€å•çš„é¢˜, ä¸€å®šè¦å…ˆå†™æš´åŠ›æˆ–è€…åŸºæœ¬æ€è·¯, <strong>ä¸è¦å…ˆé»˜æ¿å­æˆ–çº ç»“è¯¥é»˜å“ªä¸ªæ¿å­!!!</strong></p>
<h3 id="t4-1">T4</h3>
<p>è¿™ä¸€é¢˜è¦é‡‡ç”¨ç±»ä¼¼å›¾è®ºå­˜å›¾çš„æ–¹æ³•å­˜èƒ½å¼€å“ªé‡Œçš„ç¯, ç„¶å<strong>bfs</strong>.</p>
<p>é¢˜å¹²çš„æ„æ€å…¶å®æ˜¯è¦æ‰¾åˆ°æˆ¿é—´ä¹‹é—´çš„ <strong>"è¿æ¥"</strong> å…³ç³». æƒ³åˆ°è¿™é‡Œå°±èƒ½çŸ¥é“è¦ç”¨ç±»ä¼¼é‚»æ¥è¡¨çš„æ–¹å¼å­˜å›¾äº†.</p>
<p>è€ƒåœºä¸Šæˆ‘ä¸»è¦çš„é—®é¢˜åœ¨äºåªæƒ³ç€æ‰“æš´åŠ›å°±ç”¨dfs, å°±èƒ½æ‹¿åˆ†. ä½†æ˜¯è¿™ä¸ªdfsåœ¨æœ¬æœºéƒ½è‚‰çœ¼å¯è§åœ°æ…¢, å°±æ”¾å¼ƒæ²»ç–—, ä¹Ÿä¸æƒ³å‰ªæäº†.</p>
<p>æƒ³åˆ°bfsè€Œä¸æ˜¯ç”¨å…¶å®ƒæ–¹æ³•ä¸ªäººç†è§£æ˜¯å› ä¸ºæœ¬é¢˜è¦å…ˆå¼€ç›¸é‚»çš„ç¯, å¦‚æœdfséœ€è¦èµ°å®Œä¸€ä¸ªæ–¹å‘æ‰èƒ½èµ°å¦ä¸€ä¸ªæ–¹å‘, ä¸å‰ªææå…¶æµªè´¹.</p>
<h2 id="section-2">2021/10/05</h2>
<h3 id="t1-2">T1</h3>
<p>æ¨¡æ‹Ÿèµ›ä¸­ç¬¬ä¸€æ¬¡ac.</p>
<p>è€å¸ˆç»™çš„é¢˜è§£: æ•°ç»„æ¨¡æ‹Ÿ (å¯ä»¥ç†è§£ä¸ºæ‰‹å†™åŒç«¯é˜Ÿåˆ—)</p>
<p>è‡ªå·±çš„è§£æ³•: <strong>stlå¤§æ³•å¥½</strong>(ä½¿ç”¨<code>std::deque</code>, å³åŒç«¯é˜Ÿåˆ—, å¯ä»¥ç†è§£ä¸ºå¯æ“ä½œä¸¤ç«¯çš„<code>std::queue</code>)</p>
<p>å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜: ä¸€äº›stlå†…çš„å‡½æ•°å¯èƒ½æ€§èƒ½ä¸å¦‚æ‰‹å†™çš„, ä¾‹å¦‚<code>std::string</code>é‡Œé¢çš„<code>S.find(P)</code>å°±æ˜¯æš´åŠ›åŒ¹é…çš„, æ€§èƒ½ä¸å¦‚æ‰‹å†™KMP.</p>
<p>è¿™æ˜¯ä¸ªé‡å¤§çš„æ—¶åˆ», è´´ä¸ªä»£ç çºªå¿µä¸€ä¸‹, é¡ºä¾¿å¤ä¹ ä¸€ä¸‹dequeçš„ç”¨æ³•.</p>
<p>(å¦å¤–åšè¿™é¢˜çš„æ—¶å€™å¥½åƒ<strong>cinå¿˜åŠ äº†</strong>, å¯¼è‡´æµªè´¹äº†äº¿ç‚¹æ—¶é—´è°ƒé”™)</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">deque&lt;<span class="keyword">int</span>&gt; q;   <span class="comment">//éœ€è¦ä»å‰åæ“ä½œ, åŒç«¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">int</span> n, id;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">clearq</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="keyword">while</span>(q.<span class="built_in">size</span>()) {</span><br><span class="line">		q.<span class="built_in">pop_front</span>();</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">char</span> op, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="comment">//op == 'L'   å·¦è¾¹å…¥é˜Ÿ</span></span><br><span class="line">    <span class="comment">//op == 'R'   å³è¾¹å…¥é˜Ÿ</span></span><br><span class="line">    <span class="comment">//cout &lt;&lt; "add()" &lt;&lt; op &lt;&lt; ' ' &lt;&lt; x;</span></span><br><span class="line">    <span class="keyword">if</span>(op == <span class="string">'L'</span>) {</span><br><span class="line">        q.<span class="built_in">push_front</span>(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(op == <span class="string">'R'</span>) {</span><br><span class="line">        q.<span class="built_in">push_back</span>(x);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">kill_people</span><span class="params">(<span class="keyword">char</span> op, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(op == <span class="string">'L'</span>) {</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x; i ++) q.<span class="built_in">pop_front</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(op == <span class="string">'R'</span>) {</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x; i ++) q.<span class="built_in">pop_back</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">popq</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res;</span><br><span class="line">    res = q.<span class="built_in">front</span>();</span><br><span class="line">    q.<span class="built_in">pop_front</span>();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">	<span class="comment">//clearq();</span></span><br><span class="line">	ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>); cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) {</span><br><span class="line">    	<span class="comment">//puts("LOOP");</span></span><br><span class="line">        <span class="keyword">char</span> op, op1;</span><br><span class="line">        <span class="keyword">int</span> k;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; op1;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; op &lt;&lt; ' ' &lt;&lt; op1;</span></span><br><span class="line">        <span class="keyword">if</span>(op == <span class="string">'A'</span>) {</span><br><span class="line">            <span class="built_in">add</span>(op1, ++ id); 	<span class="comment">//åªæœ‰å…¥é˜Ÿæ‰ä¼šæœ‰æ–°çš„ç¼–å·, å•ç‹¬è®°å½•</span></span><br><span class="line">            <span class="comment">//puts("added!!!")</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            cin &gt;&gt; k;</span><br><span class="line">            <span class="built_in">kill_people</span>(op1, k);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(q.<span class="built_in">size</span>()) {</span><br><span class="line">    	cout &lt;&lt; q.<span class="built_in">front</span>() &lt;&lt; endl;	<span class="comment">//ä»é˜Ÿé¦–å¼€å§‹pop</span></span><br><span class="line">    	q.<span class="built_in">pop_front</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h3 id="t2-2">T2</h3>
<h3 id="t3-2">T3</h3>
<p>æš´åŠ›è§£æ³•æ˜¯æ¯ä¸ªæ•°è·Ÿå®ƒçš„å·¦è¾¹å’Œä¸Šé¢æ¯”è¾ƒ, ç»Ÿè®¡å‡ºç¬¦åˆæ¡ä»¶çš„, è®¡ç®—æœ€å¤§çš„é¢ç§¯.</p>
<p>æ­£è§£æ˜¯dp.</p>
<p>é¢„å¤„ç†<code>column[i][j</code>]å’Œ<code>can[i][j][k]</code>(ç”¨<code>can[i][j][k]</code>è¡¨ç¤ºä»ç¬¬ i è¡Œåˆ°ç¬¬ j è¡Œä¸­çš„ç¬¬ k åˆ—èƒ½å¦æ¥é“ç¬¬ i è¡Œåˆ°ç¬¬ j è¡Œçš„ k-1 åˆ—ä¸­): <span class="math display">\[
column[i][j]={column[i-1][j]+1(a[i][j]&gt;=a[i-
1][j]),column[i][j]=1}
\]</span> å…¶ä¸­ <span class="math display">\[
can[i][j][k]=(can[i][j-1][k])\and(column[j][k]&gt;=j-i+1)\and(a[j][k]&gt;=a[j][k-
1])\and(coulumn[j][k-1]&gt;=j-i+1
\]</span></p>
<p>è´´ä¸€ä¸ª70åˆ†è§£æ³•(ç”¨çš„ä¸æ˜¯dp, ä¹Ÿä¸æ˜¯æˆ‘å†™çš„)</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//DP?!ä¸è¿‡æˆ‘ä¸æƒ³ç”¨æ­£å¸¸çš„æ–¹æ³• é‚£å°±å†™ç‚¹ç„å­¦çš„å§ã€‚</span></span><br><span class="line"><span class="keyword">int</span> n,m,ma[<span class="number">205</span>][<span class="number">205</span>],row[<span class="number">205</span>][<span class="number">205</span>],col[<span class="number">205</span>][<span class="number">205</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)cin&gt;&gt;ma[i][j];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j){</span><br><span class="line">			row[i][j]=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=j+<span class="number">1</span>;k&lt;=m;++k){</span><br><span class="line">				<span class="keyword">if</span>(ma[i][k<span class="number">-1</span>]&lt;=ma[i][k])row[i][j]++;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j){</span><br><span class="line">			col[j][i]=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=j+<span class="number">1</span>;k&lt;=n;++k){</span><br><span class="line">				<span class="keyword">if</span>(ma[k<span class="number">-1</span>][i]&lt;=ma[k][i])col[j][i]++;</span><br><span class="line">				<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	<span class="comment">//å®Œäº†å®Œäº† ç„å­¦æ–¹æ³•å¼€å§‹äº† </span></span><br><span class="line">	<span class="keyword">int</span> temp=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=row[i][j];++k){<span class="comment">//kå°±æ˜¯ä¸€ç§é•¿åº¦ </span></span><br><span class="line">				<span class="keyword">int</span> len=*<span class="built_in">min_element</span>(col[i]+j,col[i]+j+k);</span><br><span class="line">				temp=k*len;</span><br><span class="line">				ans=<span class="built_in">max</span>(temp,ans);</span><br><span class="line">			}</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>
<h3 id="t4-2">T4</h3>
<p>è¿™é¢˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆå†™çš„ç®—æ³•æ²¡é—®é¢˜, æ¯”èµ›çš„æ—¶å€™äº¤äº†æ˜¯é›¶åˆ†(èµ›åäº¤äº†ä¸€éå®Œå…¨ä¸€æ ·çš„ä»£ç acäº†). å°±å½“è¿™æ¬¡acäº†å§, ä½†æ˜¯ä¸€å®šè¦æ˜ç™½ä¸ºä»€ä¹ˆä¼šå‡ºè¿™ç§é—®é¢˜, æ¯”èµ›çš„æ—¶å€™è¦æ˜¯è¿˜å‡ºå°±å«å¤©å¤©ä¸çµ, å«åœ°åœ°ä¸åº”äº†.</p>
<p>è¿™é¢˜æƒ³äº†è›®ä¹…çš„, ä¸»è¦æ˜¯è¯æ˜ç®—æ³•çš„æ­£ç¡®æ€§.</p>
<p>è¦æ³¨æ„çš„å°±æ˜¯å¦‚æœè¿™ç§è´ªå¿ƒé¢˜æœ€åæ¨å‡ºäº†ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å¼å­ä¸è¦æ€€ç–‘, åªè¦æ¯ä¸€æ­¥éƒ½ç¡®å®šæ˜¯å¯¹çš„å¼å­å°±æ²¡é”™, ä¸è¦åœ¨è¿™é‡Œè¿‡äºçº ç»“, æµªè´¹æ—¶é—´.</p>
<p>æ€è·¯å†è¯´ä¸€ä¸‹: è¦è®©ci * tæœ€å¤§, å°±è¦è®©ciè¶Šå¤§çš„è·å¾—æ›´å¤§æ—¶é—´å·®(è¿™ä¸æ˜¯åºŸè¯å—), å³æŠŠciè¿›è¡Œä»å¤§åˆ°å°æ’åº, ä¾æ¬¡æŠŠæœ€å¤§çš„ä¸¤ä¸ªä¸€æ ·çš„æ”¾åˆ°æœ€å‰é¢å’Œæœ€åé¢. éš¾ç‚¹æ˜¯æ¨¡æ‹Ÿè¿™ä¸ªæ”¾åœ¨æœ€å‰å’Œæœ€åçš„è¿‡ç¨‹.</p>
<p>è´´ä¸€ä¸‹è€ƒåœºä¸Šçš„ä»£ç , å‰é¢æ˜¯æ’åº.</p>
<figure class="highlight c++"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å®‰æ’ä½ç½®</span></span><br><span class="line">    <span class="keyword">int</span> n1 = <span class="number">1</span>, n2 = n;</span><br><span class="line">    <span class="comment">//[1, n]</span></span><br><span class="line">    <span class="comment">//n1:   å¼€å§‹æ—¶é—´åç§»é‡</span></span><br><span class="line">    <span class="comment">//n2:   ç»“æŸæ—¶é—´åç§»é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k, n1 &lt;= n2; i ++, n1 ++, n2 --) {    <span class="comment">//ä¸¤ä¸¤ä¸€å¯¹åœ°æ’å…¥</span></span><br><span class="line">        <span class="comment">//if(c[i] == c[i + 1])</span></span><br><span class="line">            <span class="comment">//cout &lt;&lt; (c[i] == c[i + 1]) &lt;&lt; ' ' &lt;&lt; c[i] &lt;&lt; ' ' &lt;&lt; n1 &lt;&lt; ' ' &lt;&lt; c[i - 1] &lt;&lt; ' ' &lt;&lt; n2 &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">//æŠŠå¤§(c[i])çš„æ”¾åœ¨æœ€å å°çš„(c[i + 1])æ”¾åœ¨æœ€å‰ æ—¶é—´å·®æœ€å¤§</span></span><br><span class="line">            <span class="comment">//ç¬¬ä¸€æ¬¡ä¸å¾—åˆ† æ±‚æ—¶é—´å·®ä¹˜ä»¥æœ€å¤§çš„(å³c[i])å³å¯</span></span><br><span class="line">            <span class="comment">//ans += ((n2 - n1) * c[i]  + 0);</span></span><br><span class="line">            ans += (n2 - n1) * c[i];</span><br><span class="line">    }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <tags>
        <tag>OI</tag>
        <tag>èµ›åæ€»ç»“</tag>
        <tag>é¢˜è§£</tag>
        <tag>æ¨¡æ‹Ÿèµ›</tag>
      </tags>
  </entry>
</search>
